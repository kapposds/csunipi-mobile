{"version":3,"file":null,"sources":["../esm/guards.js","../esm/errors.js","../esm/promise.js","../esm/util.js","../esm/auth.js","../../node_modules/component-emitter/index.js","../../node_modules/superagent/lib/is-object.js","../../node_modules/superagent/lib/request-base.js","../../node_modules/superagent/lib/utils.js","../../node_modules/superagent/lib/response-base.js","../../node_modules/superagent/lib/should-retry.js","../../node_modules/superagent/lib/client.js","../esm/client.js","../esm/config.js","../esm/cordova.js","../esm/core.js","../esm/deploy/deploy.js","../esm/device.js","../esm/events.js","../esm/insights.js","../esm/logger.js","../esm/push/message.js","../esm/push/push.js","../esm/storage.js","../esm/user/data-types.js","../esm/user/user.js","../esm/di.js","../esm/angular.js","../esm/index.js"],"sourcesContent":["export function isAPIResponseSuccess(x) {\n    return x.meta.status < 400;\n}\nexport function isAPIResponseError(x) {\n    return x.meta.status >= 400;\n}\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @hidden\n */\nvar Exception = (function (_super) {\n    __extends(Exception, _super);\n    function Exception(message) {\n        var _this = _super.call(this, message) || this;\n        _this.message = message;\n        _this.name = 'Exception';\n        _this.stack = new Error().stack;\n        return _this;\n    }\n    Exception.prototype.toString = function () {\n        return this.name + \": \" + this.message;\n    };\n    return Exception;\n}(Error));\nexport { Exception };\n/**\n * An error with generic error details.\n *\n * Error details can be extracted depending on the type of `D`. For instance,\n * if the type of `D` is `string[]`, you can do this:\n *\n * ```typescript\n * function handleError(err: IDetailedError<string[]>) {\n *   for (let i in err.details) {\n *     console.error('got error code: ' + i);\n *   }\n * }\n * ```\n *\n * @featured\n */\nvar DetailedError = (function (_super) {\n    __extends(DetailedError, _super);\n    function DetailedError(\n        /**\n         * The error message.\n         */\n        message, \n        /**\n         * The error details.\n         */\n        details) {\n        var _this = _super.call(this, message) || this;\n        _this.message = message;\n        _this.details = details;\n        _this.name = 'DetailedError';\n        return _this;\n    }\n    return DetailedError;\n}(Exception));\nexport { DetailedError };\n","/**\n * @hidden\n */\nvar DeferredPromise = (function () {\n    function DeferredPromise() {\n        this.init();\n    }\n    DeferredPromise.prototype.init = function () {\n        var _this = this;\n        this.promise = new Promise(function (resolve, reject) {\n            _this.resolve = function (v) {\n                resolve(v);\n                return _this.promise;\n            };\n            _this.reject = function (e) {\n                reject(e);\n                return _this.promise;\n            };\n        });\n    };\n    DeferredPromise.rejectImmediately = function (err) {\n        return new Promise(function (resolve, reject) {\n            reject(err);\n        });\n    };\n    return DeferredPromise;\n}());\nexport { DeferredPromise };\n","var EMAIL_REGEX = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\nvar SEMVER_REGEX = /^v?([0-9]+)\\.?([0-9]+)?\\.?([0-9]+)?\\.?.*$/;\nexport function isValidEmail(email) {\n    return EMAIL_REGEX.test(email);\n}\nexport function parseSemanticVersion(s) {\n    var r = s.trim().match(SEMVER_REGEX);\n    if (!r) {\n        throw new Error('Invalid semantic version.');\n    }\n    var v = {\n        'major': Number(r[1])\n    };\n    if (r[2]) {\n        v.minor = Number(r[2]);\n    }\n    if (r[3]) {\n        v.patch = Number(r[3]);\n    }\n    return v;\n}\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isAPIResponseError } from './guards';\nimport { DetailedError } from './errors';\nimport { DeferredPromise } from './promise';\nimport { isValidEmail } from './util';\n/**\n * @hidden\n */\nvar AuthTokenContext = (function () {\n    function AuthTokenContext(deps, label) {\n        this.label = label;\n        this.storage = deps.storage;\n    }\n    AuthTokenContext.prototype.get = function () {\n        return this.storage.get(this.label);\n    };\n    AuthTokenContext.prototype.store = function (token) {\n        this.storage.set(this.label, token);\n    };\n    AuthTokenContext.prototype.delete = function () {\n        this.storage.delete(this.label);\n    };\n    return AuthTokenContext;\n}());\nexport { AuthTokenContext };\n/**\n * @hidden\n */\nvar CombinedAuthTokenContext = (function () {\n    function CombinedAuthTokenContext(deps, label) {\n        this.label = label;\n        this.storage = deps.storage;\n        this.tempStorage = deps.tempStorage;\n    }\n    CombinedAuthTokenContext.prototype.get = function () {\n        var permToken = this.storage.get(this.label);\n        var tempToken = this.tempStorage.get(this.label);\n        var token = tempToken || permToken;\n        return token;\n    };\n    CombinedAuthTokenContext.prototype.store = function (token, options) {\n        if (options === void 0) { options = { 'permanent': true }; }\n        if (options.permanent) {\n            this.storage.set(this.label, token);\n        }\n        else {\n            this.tempStorage.set(this.label, token);\n        }\n    };\n    CombinedAuthTokenContext.prototype.delete = function () {\n        this.storage.delete(this.label);\n        this.tempStorage.delete(this.label);\n    };\n    return CombinedAuthTokenContext;\n}());\nexport { CombinedAuthTokenContext };\n/**\n * `Auth` handles authentication of a single user, such as signing up, logging\n * in & out, social provider authentication, etc.\n *\n * @featured\n */\nvar Auth = (function () {\n    function Auth(deps) {\n        this.config = deps.config;\n        this.emitter = deps.emitter;\n        this.authModules = deps.authModules;\n        this.tokenContext = deps.tokenContext;\n        this.userService = deps.userService;\n        this.storage = deps.storage;\n    }\n    Object.defineProperty(Auth.prototype, \"passwordResetUrl\", {\n        /**\n         * Link the user to this URL for password resets. Only for email/password\n         * authentication.\n         *\n         * Use this if you want to use our password reset forms instead of creating\n         * your own in your app.\n         */\n        get: function () {\n            return this.config.getURL('web') + \"/password/reset/\" + this.config.get('app_id');\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Check whether the user is logged in or not.\n     *\n     * If an auth token exists in local storage, the user is logged in.\n     */\n    Auth.prototype.isAuthenticated = function () {\n        var token = this.tokenContext.get();\n        if (token) {\n            this.emitter.emit('auth:login', { token: token });\n            return true;\n        }\n        return false;\n    };\n    /**\n     * Sign up a user with the given data. Only for email/password\n     * authentication.\n     *\n     * `signup` does not affect local data or the current user until `login` is\n     * called. This means you'll likely want to log in your users manually after\n     * signup.\n     *\n     * If a signup fails, the promise rejects with a [`IDetailedError`\n     * object](/api/client/idetailederror) that contains an array of error codes\n     * from the cloud.\n     *\n     * @param details - The details that describe a user.\n     */\n    Auth.prototype.signup = function (details) {\n        return this.authModules.basic.signup(details);\n    };\n    /**\n     * Attempt to log the user in with the given credentials. For custom & social\n     * logins, kick-off the authentication process.\n     *\n     * After login, the full user is loaded from the cloud and saved in local\n     * storage along with their auth token.\n     *\n     * @note TODO: Better error handling docs.\n     *\n     * @param moduleId\n     *  The authentication provider module ID to use with this login.\n     * @param credentials\n     *  For email/password authentication, give an email and password. For social\n     *  authentication, exclude this parameter. For custom authentication, send\n     *  whatever you need.\n     * @param options\n     *  Options for this login, such as whether to remember the login and\n     *  InAppBrowser window options for authentication providers that make use of\n     *  it.\n     */\n    Auth.prototype.login = function (moduleId, credentials, options) {\n        var _this = this;\n        if (options === void 0) { options = {}; }\n        if (typeof options.remember === 'undefined') {\n            options.remember = true;\n        }\n        if (typeof options.inAppBrowserOptions === 'undefined') {\n            options.inAppBrowserOptions = {};\n        }\n        if (typeof options.inAppBrowserOptions.location === 'undefined') {\n            options.inAppBrowserOptions.location = false;\n        }\n        if (typeof options.inAppBrowserOptions.clearcache === 'undefined') {\n            options.inAppBrowserOptions.clearcache = true;\n        }\n        if (typeof options.inAppBrowserOptions.clearsessioncache === 'undefined') {\n            options.inAppBrowserOptions.clearsessioncache = true;\n        }\n        var context = this.authModules[moduleId];\n        if (!context) {\n            throw new Error('Authentication class is invalid or missing:' + context);\n        }\n        return context.authenticate(credentials, options).then(function (r) {\n            _this.storeToken(options, r.token);\n            return _this.userService.load().then(function () {\n                var user = _this.userService.current();\n                user.store();\n                return r;\n            });\n        });\n    };\n    /**\n     * Log the user out of the app.\n     *\n     * This clears the auth token out of local storage and restores the user to\n     * an unauthenticated state.\n     */\n    Auth.prototype.logout = function () {\n        this.emitter.emit('auth:token-changed', { 'old': this.tokenContext.get(), 'new': undefined });\n        this.emitter.emit('auth:logout', {});\n        this.tokenContext.delete();\n        var user = this.userService.current();\n        user.unstore();\n        user.clear();\n    };\n    /**\n     * Kick-off the password reset process. Only for email/password\n     * authentication.\n     *\n     * An email will be sent to the user with a short password reset code, which\n     * they can copy back into your app and use the [`confirmPasswordReset()`\n     * method](#confirmPasswordReset).\n     *\n     * @param email - The email address to which to send a code.\n     */\n    Auth.prototype.requestPasswordReset = function (email) {\n        this.storage.set('auth_password_reset_email', email);\n        return this.authModules.basic.requestPasswordReset(email);\n    };\n    /**\n     * Confirm a password reset.\n     *\n     * When the user gives you their password reset code into your app and their\n     * requested changed password, call this method.\n     *\n     * @param code - The password reset code from the user.\n     * @param newPassword - The requested changed password from the user.\n     */\n    Auth.prototype.confirmPasswordReset = function (code, newPassword) {\n        var email = this.storage.get('auth_password_reset_email');\n        if (!email) {\n            return DeferredPromise.rejectImmediately(new Error('email address not found in local storage'));\n        }\n        else {\n            return this.authModules.basic.confirmPasswordReset(email, code, newPassword);\n        }\n    };\n    /**\n     * Get the raw auth token of the active user from local storage.\n     */\n    Auth.prototype.getToken = function () {\n        return this.tokenContext.get();\n    };\n    /**\n     * @hidden\n     */\n    Auth.prototype.storeToken = function (options, token) {\n        if (options === void 0) { options = { 'remember': true }; }\n        var originalToken = this.authToken;\n        this.authToken = token;\n        this.tokenContext.store(this.authToken, { 'permanent': options.remember });\n        this.emitter.emit('auth:token-changed', { 'old': originalToken, 'new': this.authToken });\n        this.emitter.emit('auth:login', { token: this.authToken });\n    };\n    /**\n     * @hidden\n     */\n    Auth.getDetailedErrorFromResponse = function (res) {\n        var errors = [];\n        var details = [];\n        if (isAPIResponseError(res.body) && typeof res.body.error.details !== 'undefined') {\n            details = res.body.error.details;\n        }\n        for (var i = 0; i < details.length; i++) {\n            var detail = details[i];\n            if (detail.error_type) {\n                errors.push(detail.error_type + '_' + detail.parameter);\n            }\n        }\n        return new DetailedError('Error creating user', errors);\n    };\n    return Auth;\n}());\nexport { Auth };\n/**\n * @hidden\n */\nvar AuthType = (function () {\n    function AuthType(deps) {\n        this.config = deps.config;\n        this.client = deps.client;\n        this.emitter = deps.emitter;\n    }\n    AuthType.prototype.parseInAppBrowserOptions = function (opts) {\n        if (!opts) {\n            return '';\n        }\n        var p = [];\n        for (var k in opts) {\n            var v = void 0;\n            if (typeof opts[k] === 'boolean') {\n                v = opts[k] ? 'yes' : 'no';\n            }\n            else {\n                v = opts[k];\n            }\n            p.push(k + \"=\" + v);\n        }\n        return p.join(',');\n    };\n    AuthType.prototype.inAppBrowserFlow = function (moduleId, data, options) {\n        var _this = this;\n        if (data === void 0) { data = {}; }\n        if (options === void 0) { options = {}; }\n        var deferred = new DeferredPromise();\n        if (!window || !window.cordova) {\n            return deferred.reject(new Error('Cordova is missing--can\\'t login with InAppBrowser flow.'));\n        }\n        this.emitter.once('cordova:deviceready', function () {\n            if (!window.cordova.InAppBrowser) {\n                deferred.reject(new Error('InAppBrowser plugin missing'));\n                return;\n            }\n            _this.client.post(\"/auth/login/\" + moduleId)\n                .send({\n                'app_id': _this.config.get('app_id'),\n                'callback': window.location.href,\n                'data': data\n            })\n                .end(function (err, res) {\n                if (err) {\n                    deferred.reject(err);\n                }\n                else {\n                    var w_1 = window.cordova.InAppBrowser.open(res.body.data.url, '_blank', _this.parseInAppBrowserOptions(options.inAppBrowserOptions));\n                    var onExit_1 = function () {\n                        deferred.reject(new Error('InAppBrowser exit'));\n                    };\n                    var onLoadError_1 = function () {\n                        deferred.reject(new Error('InAppBrowser loaderror'));\n                    };\n                    var onLoadStart = function (data) {\n                        if (data.url.slice(0, 20) === 'http://auth.ionic.io') {\n                            var queryString = data.url.split('#')[0].split('?')[1];\n                            var paramParts = queryString.split('&');\n                            var params = {};\n                            for (var i = 0; i < paramParts.length; i++) {\n                                var part = paramParts[i].split('=');\n                                params[part[0]] = part[1];\n                            }\n                            w_1.removeEventListener('exit', onExit_1);\n                            w_1.removeEventListener('loaderror', onLoadError_1);\n                            w_1.close();\n                            if (params['error']) {\n                                deferred.reject(new Error(decodeURIComponent(params['error'])));\n                            }\n                            else {\n                                deferred.resolve({\n                                    'token': params['token'],\n                                    'signup': Boolean(parseInt(params['signup'], 10))\n                                });\n                            }\n                        }\n                    };\n                    w_1.addEventListener('exit', onExit_1);\n                    w_1.addEventListener('loaderror', onLoadError_1);\n                    w_1.addEventListener('loadstart', onLoadStart);\n                }\n            });\n        });\n        return deferred.promise;\n    };\n    return AuthType;\n}());\nexport { AuthType };\n/**\n * @hidden\n */\nvar BasicAuthType = (function (_super) {\n    __extends(BasicAuthType, _super);\n    function BasicAuthType() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    BasicAuthType.prototype.authenticate = function (data, options) {\n        var deferred = new DeferredPromise();\n        if (!data.email || !data.password) {\n            return deferred.reject(new Error('email and password are required for basic authentication'));\n        }\n        this.client.post('/auth/login')\n            .send({\n            'app_id': this.config.get('app_id'),\n            'email': data.email,\n            'password': data.password\n        })\n            .end(function (err, res) {\n            if (err) {\n                deferred.reject(err);\n            }\n            else {\n                deferred.resolve({\n                    'token': res.body.data.token\n                });\n            }\n        });\n        return deferred.promise;\n    };\n    BasicAuthType.prototype.requestPasswordReset = function (email) {\n        var deferred = new DeferredPromise();\n        if (!email) {\n            return deferred.reject(new Error('Email is required for password reset request.'));\n        }\n        this.client.post('/auth/users/password/reset')\n            .send({\n            'app_id': this.config.get('app_id'),\n            'email': email,\n            'flow': 'app'\n        })\n            .end(function (err, res) {\n            if (err) {\n                deferred.reject(err);\n            }\n            else {\n                deferred.resolve();\n            }\n        });\n        return deferred.promise;\n    };\n    BasicAuthType.prototype.confirmPasswordReset = function (email, code, newPassword) {\n        var deferred = new DeferredPromise();\n        if (!code || !email || !newPassword) {\n            return deferred.reject(new Error('Code, new password, and email are required.'));\n        }\n        this.client.post('/auth/users/password')\n            .send({\n            'reset_token': code,\n            'new_password': newPassword,\n            'email': email\n        })\n            .end(function (err, res) {\n            if (err) {\n                deferred.reject(err);\n            }\n            else {\n                deferred.resolve();\n            }\n        });\n        return deferred.promise;\n    };\n    BasicAuthType.prototype.signup = function (data) {\n        var deferred = new DeferredPromise();\n        if (data.email) {\n            if (!isValidEmail(data.email)) {\n                return deferred.reject(new DetailedError('Invalid email supplied.', ['invalid_email']));\n            }\n        }\n        else {\n            return deferred.reject(new DetailedError('Email is required for email/password auth signup.', ['required_email']));\n        }\n        if (!data.password) {\n            return deferred.reject(new DetailedError('Password is required for email/password auth signup.', ['required_password']));\n        }\n        var userData = {\n            'app_id': this.config.get('app_id'),\n            'email': data.email,\n            'password': data.password\n        };\n        // optional details\n        if (data.username) {\n            userData.username = data.username;\n        }\n        if (data.image) {\n            userData.image = data.image;\n        }\n        if (data.name) {\n            userData.name = data.name;\n        }\n        if (data.custom) {\n            userData.custom = data.custom;\n        }\n        this.client.post('/auth/users')\n            .send(userData)\n            .end(function (err, res) {\n            if (err) {\n                deferred.reject(Auth.getDetailedErrorFromResponse(err.response));\n            }\n            else {\n                deferred.resolve();\n            }\n        });\n        return deferred.promise;\n    };\n    return BasicAuthType;\n}(AuthType));\nexport { BasicAuthType };\n/**\n * hidden\n */\nvar NativeAuth = (function () {\n    function NativeAuth(deps) {\n        this.config = deps.config;\n        this.client = deps.client;\n        this.userService = deps.userService;\n        this.tokenContext = deps.tokenContext;\n        this.emitter = deps.emitter;\n    }\n    /**\n     * Get the raw auth token of the active user from local storage.\n     * @hidden\n     */\n    NativeAuth.prototype.getToken = function () {\n        return this.tokenContext.get();\n    };\n    /**\n     * @hidden\n     */\n    NativeAuth.prototype.storeToken = function (token) {\n        var originalToken = this.authToken;\n        this.authToken = token;\n        this.tokenContext.store(this.authToken, { 'permanent': true });\n        this.emitter.emit('auth:token-changed', { 'old': originalToken, 'new': this.authToken });\n        this.emitter.emit('auth:login', { token: this.authToken });\n    };\n    return NativeAuth;\n}());\nexport { NativeAuth };\n/**\n * GoogleNativeAuth handles logging into googleplus through the cordova-plugin-googleplus plugin.'\n * @featured\n */\nvar GoogleAuth = (function (_super) {\n    __extends(GoogleAuth, _super);\n    function GoogleAuth() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    GoogleAuth.prototype.logout = function () {\n        var deferred = new DeferredPromise();\n        this.emitter.emit('auth:token-changed', { 'old': this.tokenContext.get(), 'new': undefined });\n        this.emitter.emit('auth:logout', {});\n        this.tokenContext.delete();\n        var user = this.userService.current();\n        user.unstore();\n        user.clear();\n        window.plugins.googleplus.logout(function () {\n            deferred.resolve();\n        }, function (err) {\n            deferred.reject(err);\n        });\n        return deferred.promise;\n    };\n    GoogleAuth.prototype.login = function () {\n        var _this = this;\n        var deferred = new DeferredPromise();\n        var authConfig = this.config.settings.auth;\n        this.emitter.once('cordova:deviceready', function () {\n            var scope = ['profile', 'email'];\n            if (!window || !window.cordova) {\n                deferred.reject(new Error('Cordova is missing'));\n                return;\n            }\n            if (!window.plugins || !window.plugins.googleplus) {\n                deferred.reject(new Error('GooglePlus cordova plugin is missing. Install the plugin by following the instructions here: https://github.com/EddyVerbruggen/cordova-plugin-googleplus'));\n                return;\n            }\n            if (!authConfig || !authConfig.google || !authConfig.google.webClientId) {\n                deferred.reject(new Error('Missing google web client id. Please visit http://docs.ionic.io/services/users/google-auth.html#native'));\n                return;\n            }\n            if (authConfig.google.scope) {\n                authConfig.google.scope.forEach(function (item) {\n                    if (scope.indexOf(item) === -1) {\n                        scope.push(item);\n                    }\n                });\n            }\n            window.plugins.googleplus.login({ 'webClientId': authConfig.google.webClientId, 'offline': true, 'scopes': scope.join(' ') }, function (success) {\n                if (!success.serverAuthCode) {\n                    deferred.reject(new Error('Failed to retrieve offline access token.'));\n                    return;\n                }\n                var request_object = {\n                    'app_id': _this.config.get('app_id'),\n                    'serverAuthCode': success.serverAuthCode,\n                    'additional_fields': scope,\n                    'flow': 'native-mobile'\n                };\n                _this.client.post('/auth/login/google')\n                    .send(request_object)\n                    .end(function (err, res) {\n                    if (err) {\n                        deferred.reject(err);\n                    }\n                    else {\n                        _this.storeToken(res.body.data.token);\n                        _this.userService.load().then(function () {\n                            var user = _this.userService.current();\n                            user.store();\n                            deferred.resolve({\n                                'token': res.body.data.token,\n                                'signup': Boolean(parseInt(res.body.data.signup, 10))\n                            });\n                        });\n                    }\n                });\n            }, function (err) {\n                deferred.reject(err);\n            });\n        });\n        return deferred.promise;\n    };\n    return GoogleAuth;\n}(NativeAuth));\nexport { GoogleAuth };\n/**\n * FacebookNative handles logging into facebook through the cordova-plugin-facebook4 plugin.\n * @featured\n */\nvar FacebookAuth = (function (_super) {\n    __extends(FacebookAuth, _super);\n    function FacebookAuth() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    FacebookAuth.prototype.logout = function () {\n        var deferred = new DeferredPromise();\n        this.emitter.emit('auth:token-changed', { 'old': this.tokenContext.get(), 'new': undefined });\n        this.emitter.emit('auth:logout', {});\n        this.tokenContext.delete();\n        var user = this.userService.current();\n        user.unstore();\n        user.clear();\n        // Clear the facebook auth.\n        window.facebookConnectPlugin.logout(function () {\n            deferred.resolve();\n        }, function (err) {\n            deferred.reject(err);\n        });\n        return deferred.promise;\n    };\n    FacebookAuth.prototype.login = function () {\n        var _this = this;\n        var deferred = new DeferredPromise();\n        var authConfig = this.config.settings.auth;\n        var scope = ['public_profile', 'email'];\n        if (authConfig && authConfig.facebook && authConfig.facebook.scope) {\n            authConfig.facebook.scope.forEach(function (item) {\n                if (scope.indexOf(item) === -1) {\n                    scope.push(item);\n                }\n            });\n        }\n        this.emitter.once('cordova:deviceready', function () {\n            if (!window || !window.cordova) {\n                deferred.reject(new Error('Cordova is missing.'));\n                return;\n            }\n            if (!window.facebookConnectPlugin) {\n                deferred.reject(new Error('Please install the cordova-plugin-facebook4 plugin'));\n                return;\n            }\n            window.facebookConnectPlugin.login(scope, function (r) {\n                scope.splice(scope.indexOf('public_profile'), 1);\n                var request_object = {\n                    'app_id': _this.config.get('app_id'),\n                    'access_token': r.authResponse.accessToken,\n                    'additional_fields': scope,\n                    'flow': 'native-mobile'\n                };\n                _this.client.post('/auth/login/facebook')\n                    .send(request_object)\n                    .end(function (err, res) {\n                    if (err) {\n                        deferred.reject(err);\n                    }\n                    else {\n                        _this.storeToken(res.body.data.token);\n                        _this.userService.load().then(function () {\n                            var user = _this.userService.current();\n                            user.store();\n                            deferred.resolve({\n                                'token': res.body.data.token,\n                                'signup': Boolean(parseInt(res.body.data.signup, 10))\n                            });\n                        });\n                    }\n                });\n            }, function (err) {\n                deferred.reject(err);\n            });\n        });\n        return deferred.promise;\n    };\n    return FacebookAuth;\n}(NativeAuth));\nexport { FacebookAuth };\n/**\n * @hidden\n */\nvar CustomAuthType = (function (_super) {\n    __extends(CustomAuthType, _super);\n    function CustomAuthType() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    CustomAuthType.prototype.authenticate = function (data, options) {\n        if (data === void 0) { data = {}; }\n        return this.inAppBrowserFlow('custom', data, options);\n    };\n    return CustomAuthType;\n}(AuthType));\nexport { CustomAuthType };\n/**\n * @hidden\n */\nvar TwitterAuthType = (function (_super) {\n    __extends(TwitterAuthType, _super);\n    function TwitterAuthType() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    TwitterAuthType.prototype.authenticate = function (data, options) {\n        if (data === void 0) { data = {}; }\n        return this.inAppBrowserFlow('twitter', data, options);\n    };\n    return TwitterAuthType;\n}(AuthType));\nexport { TwitterAuthType };\n/**\n * @hidden\n */\nvar FacebookAuthType = (function (_super) {\n    __extends(FacebookAuthType, _super);\n    function FacebookAuthType() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    FacebookAuthType.prototype.authenticate = function (data, options) {\n        if (data === void 0) { data = {}; }\n        return this.inAppBrowserFlow('facebook', data, options);\n    };\n    return FacebookAuthType;\n}(AuthType));\nexport { FacebookAuthType };\n/**\n * @hidden\n */\nvar GithubAuthType = (function (_super) {\n    __extends(GithubAuthType, _super);\n    function GithubAuthType() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    GithubAuthType.prototype.authenticate = function (data, options) {\n        if (data === void 0) { data = {}; }\n        return this.inAppBrowserFlow('github', data, options);\n    };\n    return GithubAuthType;\n}(AuthType));\nexport { GithubAuthType };\n/**\n * @hidden\n */\nvar GoogleAuthType = (function (_super) {\n    __extends(GoogleAuthType, _super);\n    function GoogleAuthType() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    GoogleAuthType.prototype.authenticate = function (data, options) {\n        if (data === void 0) { data = {}; }\n        return this.inAppBrowserFlow('google', data, options);\n    };\n    return GoogleAuthType;\n}(AuthType));\nexport { GoogleAuthType };\n/**\n * @hidden\n */\nvar InstagramAuthType = (function (_super) {\n    __extends(InstagramAuthType, _super);\n    function InstagramAuthType() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    InstagramAuthType.prototype.authenticate = function (data, options) {\n        if (data === void 0) { data = {}; }\n        return this.inAppBrowserFlow('instagram', data, options);\n    };\n    return InstagramAuthType;\n}(AuthType));\nexport { InstagramAuthType };\n/**\n * @hidden\n */\nvar LinkedInAuthType = (function (_super) {\n    __extends(LinkedInAuthType, _super);\n    function LinkedInAuthType() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    LinkedInAuthType.prototype.authenticate = function (data, options) {\n        if (data === void 0) { data = {}; }\n        return this.inAppBrowserFlow('linkedin', data, options);\n    };\n    return LinkedInAuthType;\n}(AuthType));\nexport { LinkedInAuthType };\n","\r\n/**\r\n * Expose `Emitter`.\r\n */\r\n\r\nif (typeof module !== 'undefined') {\r\n  module.exports = Emitter;\r\n}\r\n\r\n/**\r\n * Initialize a new `Emitter`.\r\n *\r\n * @api public\r\n */\r\n\r\nfunction Emitter(obj) {\r\n  if (obj) return mixin(obj);\r\n};\r\n\r\n/**\r\n * Mixin the emitter properties.\r\n *\r\n * @param {Object} obj\r\n * @return {Object}\r\n * @api private\r\n */\r\n\r\nfunction mixin(obj) {\r\n  for (var key in Emitter.prototype) {\r\n    obj[key] = Emitter.prototype[key];\r\n  }\r\n  return obj;\r\n}\r\n\r\n/**\r\n * Listen on the given `event` with `fn`.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.on =\r\nEmitter.prototype.addEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\r\n    .push(fn);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Adds an `event` listener that will be invoked a single\r\n * time then automatically removed.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.once = function(event, fn){\r\n  function on() {\r\n    this.off(event, on);\r\n    fn.apply(this, arguments);\r\n  }\r\n\r\n  on.fn = fn;\r\n  this.on(event, on);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Remove the given callback for `event` or all\r\n * registered callbacks.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.off =\r\nEmitter.prototype.removeListener =\r\nEmitter.prototype.removeAllListeners =\r\nEmitter.prototype.removeEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  // all\r\n  if (0 == arguments.length) {\r\n    this._callbacks = {};\r\n    return this;\r\n  }\r\n\r\n  // specific event\r\n  var callbacks = this._callbacks['$' + event];\r\n  if (!callbacks) return this;\r\n\r\n  // remove all handlers\r\n  if (1 == arguments.length) {\r\n    delete this._callbacks['$' + event];\r\n    return this;\r\n  }\r\n\r\n  // remove specific handler\r\n  var cb;\r\n  for (var i = 0; i < callbacks.length; i++) {\r\n    cb = callbacks[i];\r\n    if (cb === fn || cb.fn === fn) {\r\n      callbacks.splice(i, 1);\r\n      break;\r\n    }\r\n  }\r\n  return this;\r\n};\r\n\r\n/**\r\n * Emit `event` with the given args.\r\n *\r\n * @param {String} event\r\n * @param {Mixed} ...\r\n * @return {Emitter}\r\n */\r\n\r\nEmitter.prototype.emit = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  var args = [].slice.call(arguments, 1)\r\n    , callbacks = this._callbacks['$' + event];\r\n\r\n  if (callbacks) {\r\n    callbacks = callbacks.slice(0);\r\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\r\n      callbacks[i].apply(this, args);\r\n    }\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Return array of callbacks for `event`.\r\n *\r\n * @param {String} event\r\n * @return {Array}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.listeners = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  return this._callbacks['$' + event] || [];\r\n};\r\n\r\n/**\r\n * Check if this emitter has `event` handlers.\r\n *\r\n * @param {String} event\r\n * @return {Boolean}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.hasListeners = function(event){\r\n  return !! this.listeners(event).length;\r\n};\r\n","/**\n * Check if `obj` is an object.\n *\n * @param {Object} obj\n * @return {Boolean}\n * @api private\n */\n\nfunction isObject(obj) {\n  return null !== obj && 'object' === typeof obj;\n}\n\nmodule.exports = isObject;\n","/**\n * Module of mixed-in functions shared between node and client code\n */\nvar isObject = require('./is-object');\n\n/**\n * Expose `RequestBase`.\n */\n\nmodule.exports = RequestBase;\n\n/**\n * Initialize a new `RequestBase`.\n *\n * @api public\n */\n\nfunction RequestBase(obj) {\n  if (obj) return mixin(obj);\n}\n\n/**\n * Mixin the prototype properties.\n *\n * @param {Object} obj\n * @return {Object}\n * @api private\n */\n\nfunction mixin(obj) {\n  for (var key in RequestBase.prototype) {\n    obj[key] = RequestBase.prototype[key];\n  }\n  return obj;\n}\n\n/**\n * Clear previous timeout.\n *\n * @return {Request} for chaining\n * @api public\n */\n\nRequestBase.prototype.clearTimeout = function _clearTimeout(){\n  clearTimeout(this._timer);\n  clearTimeout(this._responseTimeoutTimer);\n  delete this._timer;\n  delete this._responseTimeoutTimer;\n  return this;\n};\n\n/**\n * Override default response body parser\n *\n * This function will be called to convert incoming data into request.body\n *\n * @param {Function}\n * @api public\n */\n\nRequestBase.prototype.parse = function parse(fn){\n  this._parser = fn;\n  return this;\n};\n\n/**\n * Set format of binary response body.\n * In browser valid formats are 'blob' and 'arraybuffer',\n * which return Blob and ArrayBuffer, respectively.\n *\n * In Node all values result in Buffer.\n *\n * Examples:\n *\n *      req.get('/')\n *        .responseType('blob')\n *        .end(callback);\n *\n * @param {String} val\n * @return {Request} for chaining\n * @api public\n */\n\nRequestBase.prototype.responseType = function(val){\n  this._responseType = val;\n  return this;\n};\n\n/**\n * Override default request body serializer\n *\n * This function will be called to convert data set via .send or .attach into payload to send\n *\n * @param {Function}\n * @api public\n */\n\nRequestBase.prototype.serialize = function serialize(fn){\n  this._serializer = fn;\n  return this;\n};\n\n/**\n * Set timeouts.\n *\n * - response timeout is time between sending request and receiving the first byte of the response. Includes DNS and connection time.\n * - deadline is the time from start of the request to receiving response body in full. If the deadline is too short large files may not load at all on slow connections.\n *\n * Value of 0 or false means no timeout.\n *\n * @param {Number|Object} ms or {response, deadline}\n * @return {Request} for chaining\n * @api public\n */\n\nRequestBase.prototype.timeout = function timeout(options){\n  if (!options || 'object' !== typeof options) {\n    this._timeout = options;\n    this._responseTimeout = 0;\n    return this;\n  }\n\n  for(var option in options) {\n    switch(option) {\n      case 'deadline':\n        this._timeout = options.deadline;\n        break;\n      case 'response':\n        this._responseTimeout = options.response;\n        break;\n      default:\n        console.warn(\"Unknown timeout option\", option);\n    }\n  }\n  return this;\n};\n\n/**\n * Set number of retry attempts on error.\n *\n * Failed requests will be retried 'count' times if timeout or err.code >= 500.\n *\n * @param {Number} count\n * @return {Request} for chaining\n * @api public\n */\n\nRequestBase.prototype.retry = function retry(count){\n  // Default to 1 if no count passed or true\n  if (arguments.length === 0 || count === true) count = 1;\n  if (count <= 0) count = 0;\n  this._maxRetries = count;\n  this._retries = 0;\n  return this;\n};\n\n/**\n * Retry request\n *\n * @return {Request} for chaining\n * @api private\n */\n\nRequestBase.prototype._retry = function() {\n  this.clearTimeout();\n\n  // node\n  if (this.req) {\n    this.req = null;\n    this.req = this.request();\n  }\n\n  this._aborted = false;\n  this.timedout = false;\n\n  return this._end();\n};\n\n/**\n * Promise support\n *\n * @param {Function} resolve\n * @param {Function} [reject]\n * @return {Request}\n */\n\nRequestBase.prototype.then = function then(resolve, reject) {\n  if (!this._fullfilledPromise) {\n    var self = this;\n    if (this._endCalled) {\n      console.warn(\"Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises\");\n    }\n    this._fullfilledPromise = new Promise(function(innerResolve, innerReject){\n      self.end(function(err, res){\n        if (err) innerReject(err); else innerResolve(res);\n      });\n    });\n  }\n  return this._fullfilledPromise.then(resolve, reject);\n}\n\nRequestBase.prototype.catch = function(cb) {\n  return this.then(undefined, cb);\n};\n\n/**\n * Allow for extension\n */\n\nRequestBase.prototype.use = function use(fn) {\n  fn(this);\n  return this;\n}\n\nRequestBase.prototype.ok = function(cb) {\n  if ('function' !== typeof cb) throw Error(\"Callback required\");\n  this._okCallback = cb;\n  return this;\n};\n\nRequestBase.prototype._isResponseOK = function(res) {\n  if (!res) {\n    return false;\n  }\n\n  if (this._okCallback) {\n    return this._okCallback(res);\n  }\n\n  return res.status >= 200 && res.status < 300;\n};\n\n\n/**\n * Get request header `field`.\n * Case-insensitive.\n *\n * @param {String} field\n * @return {String}\n * @api public\n */\n\nRequestBase.prototype.get = function(field){\n  return this._header[field.toLowerCase()];\n};\n\n/**\n * Get case-insensitive header `field` value.\n * This is a deprecated internal API. Use `.get(field)` instead.\n *\n * (getHeader is no longer used internally by the superagent code base)\n *\n * @param {String} field\n * @return {String}\n * @api private\n * @deprecated\n */\n\nRequestBase.prototype.getHeader = RequestBase.prototype.get;\n\n/**\n * Set header `field` to `val`, or multiple fields with one object.\n * Case-insensitive.\n *\n * Examples:\n *\n *      req.get('/')\n *        .set('Accept', 'application/json')\n *        .set('X-API-Key', 'foobar')\n *        .end(callback);\n *\n *      req.get('/')\n *        .set({ Accept: 'application/json', 'X-API-Key': 'foobar' })\n *        .end(callback);\n *\n * @param {String|Object} field\n * @param {String} val\n * @return {Request} for chaining\n * @api public\n */\n\nRequestBase.prototype.set = function(field, val){\n  if (isObject(field)) {\n    for (var key in field) {\n      this.set(key, field[key]);\n    }\n    return this;\n  }\n  this._header[field.toLowerCase()] = val;\n  this.header[field] = val;\n  return this;\n};\n\n/**\n * Remove header `field`.\n * Case-insensitive.\n *\n * Example:\n *\n *      req.get('/')\n *        .unset('User-Agent')\n *        .end(callback);\n *\n * @param {String} field\n */\nRequestBase.prototype.unset = function(field){\n  delete this._header[field.toLowerCase()];\n  delete this.header[field];\n  return this;\n};\n\n/**\n * Write the field `name` and `val`, or multiple fields with one object\n * for \"multipart/form-data\" request bodies.\n *\n * ``` js\n * request.post('/upload')\n *   .field('foo', 'bar')\n *   .end(callback);\n *\n * request.post('/upload')\n *   .field({ foo: 'bar', baz: 'qux' })\n *   .end(callback);\n * ```\n *\n * @param {String|Object} name\n * @param {String|Blob|File|Buffer|fs.ReadStream} val\n * @return {Request} for chaining\n * @api public\n */\nRequestBase.prototype.field = function(name, val) {\n\n  // name should be either a string or an object.\n  if (null === name ||  undefined === name) {\n    throw new Error('.field(name, val) name can not be empty');\n  }\n\n  if (this._data) {\n    console.error(\".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()\");\n  }\n\n  if (isObject(name)) {\n    for (var key in name) {\n      this.field(key, name[key]);\n    }\n    return this;\n  }\n\n  if (Array.isArray(val)) {\n    for (var i in val) {\n      this.field(name, val[i]);\n    }\n    return this;\n  }\n\n  // val should be defined now\n  if (null === val || undefined === val) {\n    throw new Error('.field(name, val) val can not be empty');\n  }\n  if ('boolean' === typeof val) {\n    val = '' + val;\n  }\n  this._getFormData().append(name, val);\n  return this;\n};\n\n/**\n * Abort the request, and clear potential timeout.\n *\n * @return {Request}\n * @api public\n */\nRequestBase.prototype.abort = function(){\n  if (this._aborted) {\n    return this;\n  }\n  this._aborted = true;\n  this.xhr && this.xhr.abort(); // browser\n  this.req && this.req.abort(); // node\n  this.clearTimeout();\n  this.emit('abort');\n  return this;\n};\n\n/**\n * Enable transmission of cookies with x-domain requests.\n *\n * Note that for this to work the origin must not be\n * using \"Access-Control-Allow-Origin\" with a wildcard,\n * and also must set \"Access-Control-Allow-Credentials\"\n * to \"true\".\n *\n * @api public\n */\n\nRequestBase.prototype.withCredentials = function(on){\n  // This is browser-only functionality. Node side is no-op.\n  if(on==undefined) on = true;\n  this._withCredentials = on;\n  return this;\n};\n\n/**\n * Set the max redirects to `n`. Does noting in browser XHR implementation.\n *\n * @param {Number} n\n * @return {Request} for chaining\n * @api public\n */\n\nRequestBase.prototype.redirects = function(n){\n  this._maxRedirects = n;\n  return this;\n};\n\n/**\n * Convert to a plain javascript object (not JSON string) of scalar properties.\n * Note as this method is designed to return a useful non-this value,\n * it cannot be chained.\n *\n * @return {Object} describing method, url, and data of this request\n * @api public\n */\n\nRequestBase.prototype.toJSON = function(){\n  return {\n    method: this.method,\n    url: this.url,\n    data: this._data,\n    headers: this._header\n  };\n};\n\n\n/**\n * Send `data` as the request body, defaulting the `.type()` to \"json\" when\n * an object is given.\n *\n * Examples:\n *\n *       // manual json\n *       request.post('/user')\n *         .type('json')\n *         .send('{\"name\":\"tj\"}')\n *         .end(callback)\n *\n *       // auto json\n *       request.post('/user')\n *         .send({ name: 'tj' })\n *         .end(callback)\n *\n *       // manual x-www-form-urlencoded\n *       request.post('/user')\n *         .type('form')\n *         .send('name=tj')\n *         .end(callback)\n *\n *       // auto x-www-form-urlencoded\n *       request.post('/user')\n *         .type('form')\n *         .send({ name: 'tj' })\n *         .end(callback)\n *\n *       // defaults to x-www-form-urlencoded\n *      request.post('/user')\n *        .send('name=tobi')\n *        .send('species=ferret')\n *        .end(callback)\n *\n * @param {String|Object} data\n * @return {Request} for chaining\n * @api public\n */\n\nRequestBase.prototype.send = function(data){\n  var isObj = isObject(data);\n  var type = this._header['content-type'];\n\n  if (this._formData) {\n    console.error(\".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()\");\n  }\n\n  if (isObj && !this._data) {\n    if (Array.isArray(data)) {\n      this._data = [];\n    } else if (!this._isHost(data)) {\n      this._data = {};\n    }\n  } else if (data && this._data && this._isHost(this._data)) {\n    throw Error(\"Can't merge these send calls\");\n  }\n\n  // merge\n  if (isObj && isObject(this._data)) {\n    for (var key in data) {\n      this._data[key] = data[key];\n    }\n  } else if ('string' == typeof data) {\n    // default to x-www-form-urlencoded\n    if (!type) this.type('form');\n    type = this._header['content-type'];\n    if ('application/x-www-form-urlencoded' == type) {\n      this._data = this._data\n        ? this._data + '&' + data\n        : data;\n    } else {\n      this._data = (this._data || '') + data;\n    }\n  } else {\n    this._data = data;\n  }\n\n  if (!isObj || this._isHost(data)) {\n    return this;\n  }\n\n  // default to json\n  if (!type) this.type('json');\n  return this;\n};\n\n\n/**\n * Sort `querystring` by the sort function\n *\n *\n * Examples:\n *\n *       // default order\n *       request.get('/user')\n *         .query('name=Nick')\n *         .query('search=Manny')\n *         .sortQuery()\n *         .end(callback)\n *\n *       // customized sort function\n *       request.get('/user')\n *         .query('name=Nick')\n *         .query('search=Manny')\n *         .sortQuery(function(a, b){\n *           return a.length - b.length;\n *         })\n *         .end(callback)\n *\n *\n * @param {Function} sort\n * @return {Request} for chaining\n * @api public\n */\n\nRequestBase.prototype.sortQuery = function(sort) {\n  // _sort default to true but otherwise can be a function or boolean\n  this._sort = typeof sort === 'undefined' ? true : sort;\n  return this;\n};\n\n/**\n * Compose querystring to append to req.url\n *\n * @api private\n */\nRequestBase.prototype._finalizeQueryString = function(){\n  var query = this._query.join('&');\n  if (query) {\n    this.url += (this.url.indexOf('?') >= 0 ? '&' : '?') + query;\n  }\n  this._query.length = 0; // Makes the call idempotent\n\n  if (this._sort) {\n    var index = this.url.indexOf('?');\n    if (index >= 0) {\n      var queryArr = this.url.substring(index + 1).split('&');\n      if ('function' === typeof this._sort) {\n        queryArr.sort(this._sort);\n      } else {\n        queryArr.sort();\n      }\n      this.url = this.url.substring(0, index) + '?' + queryArr.join('&');\n    }\n  }\n};\n\n// For backwards compat only\nRequestBase.prototype._appendQueryString = function() {console.trace(\"Unsupported\");}\n\n/**\n * Invoke callback with timeout error.\n *\n * @api private\n */\n\nRequestBase.prototype._timeoutError = function(reason, timeout, errno){\n  if (this._aborted) {\n    return;\n  }\n  var err = new Error(reason + timeout + 'ms exceeded');\n  err.timeout = timeout;\n  err.code = 'ECONNABORTED';\n  err.errno = errno;\n  this.timedout = true;\n  this.abort();\n  this.callback(err);\n};\n\nRequestBase.prototype._setTimeouts = function() {\n  var self = this;\n\n  // deadline\n  if (this._timeout && !this._timer) {\n    this._timer = setTimeout(function(){\n      self._timeoutError('Timeout of ', self._timeout, 'ETIME');\n    }, this._timeout);\n  }\n  // response timeout\n  if (this._responseTimeout && !this._responseTimeoutTimer) {\n    this._responseTimeoutTimer = setTimeout(function(){\n      self._timeoutError('Response timeout of ', self._responseTimeout, 'ETIMEDOUT');\n    }, this._responseTimeout);\n  }\n}\n","\n/**\n * Return the mime type for the given `str`.\n *\n * @param {String} str\n * @return {String}\n * @api private\n */\n\nexports.type = function(str){\n  return str.split(/ *; */).shift();\n};\n\n/**\n * Return header field parameters.\n *\n * @param {String} str\n * @return {Object}\n * @api private\n */\n\nexports.params = function(str){\n  return str.split(/ *; */).reduce(function(obj, str){\n    var parts = str.split(/ *= */);\n    var key = parts.shift();\n    var val = parts.shift();\n\n    if (key && val) obj[key] = val;\n    return obj;\n  }, {});\n};\n\n/**\n * Parse Link header fields.\n *\n * @param {String} str\n * @return {Object}\n * @api private\n */\n\nexports.parseLinks = function(str){\n  return str.split(/ *, */).reduce(function(obj, str){\n    var parts = str.split(/ *; */);\n    var url = parts[0].slice(1, -1);\n    var rel = parts[1].split(/ *= */)[1].slice(1, -1);\n    obj[rel] = url;\n    return obj;\n  }, {});\n};\n\n/**\n * Strip content related fields from `header`.\n *\n * @param {Object} header\n * @return {Object} header\n * @api private\n */\n\nexports.cleanHeader = function(header, shouldStripCookie){\n  delete header['content-type'];\n  delete header['content-length'];\n  delete header['transfer-encoding'];\n  delete header['host'];\n  if (shouldStripCookie) {\n    delete header['cookie'];\n  }\n  return header;\n};","\n/**\n * Module dependencies.\n */\n\nvar utils = require('./utils');\n\n/**\n * Expose `ResponseBase`.\n */\n\nmodule.exports = ResponseBase;\n\n/**\n * Initialize a new `ResponseBase`.\n *\n * @api public\n */\n\nfunction ResponseBase(obj) {\n  if (obj) return mixin(obj);\n}\n\n/**\n * Mixin the prototype properties.\n *\n * @param {Object} obj\n * @return {Object}\n * @api private\n */\n\nfunction mixin(obj) {\n  for (var key in ResponseBase.prototype) {\n    obj[key] = ResponseBase.prototype[key];\n  }\n  return obj;\n}\n\n/**\n * Get case-insensitive `field` value.\n *\n * @param {String} field\n * @return {String}\n * @api public\n */\n\nResponseBase.prototype.get = function(field){\n    return this.header[field.toLowerCase()];\n};\n\n/**\n * Set header related properties:\n *\n *   - `.type` the content type without params\n *\n * A response of \"Content-Type: text/plain; charset=utf-8\"\n * will provide you with a `.type` of \"text/plain\".\n *\n * @param {Object} header\n * @api private\n */\n\nResponseBase.prototype._setHeaderProperties = function(header){\n    // TODO: moar!\n    // TODO: make this a util\n\n    // content-type\n    var ct = header['content-type'] || '';\n    this.type = utils.type(ct);\n\n    // params\n    var params = utils.params(ct);\n    for (var key in params) this[key] = params[key];\n\n    this.links = {};\n\n    // links\n    try {\n        if (header.link) {\n            this.links = utils.parseLinks(header.link);\n        }\n    } catch (err) {\n        // ignore\n    }\n};\n\n/**\n * Set flags such as `.ok` based on `status`.\n *\n * For example a 2xx response will give you a `.ok` of __true__\n * whereas 5xx will be __false__ and `.error` will be __true__. The\n * `.clientError` and `.serverError` are also available to be more\n * specific, and `.statusType` is the class of error ranging from 1..5\n * sometimes useful for mapping respond colors etc.\n *\n * \"sugar\" properties are also defined for common cases. Currently providing:\n *\n *   - .noContent\n *   - .badRequest\n *   - .unauthorized\n *   - .notAcceptable\n *   - .notFound\n *\n * @param {Number} status\n * @api private\n */\n\nResponseBase.prototype._setStatusProperties = function(status){\n    var type = status / 100 | 0;\n\n    // status / class\n    this.status = this.statusCode = status;\n    this.statusType = type;\n\n    // basics\n    this.info = 1 == type;\n    this.ok = 2 == type;\n    this.redirect = 3 == type;\n    this.clientError = 4 == type;\n    this.serverError = 5 == type;\n    this.error = (4 == type || 5 == type)\n        ? this.toError()\n        : false;\n\n    // sugar\n    this.accepted = 202 == status;\n    this.noContent = 204 == status;\n    this.badRequest = 400 == status;\n    this.unauthorized = 401 == status;\n    this.notAcceptable = 406 == status;\n    this.forbidden = 403 == status;\n    this.notFound = 404 == status;\n};\n","var ERROR_CODES = [\n  'ECONNRESET',\n  'ETIMEDOUT',\n  'EADDRINFO',\n  'ESOCKETTIMEDOUT'\n];\n\n/**\n * Determine if a request should be retried.\n * (Borrowed from segmentio/superagent-retry)\n *\n * @param {Error} err\n * @param {Response} [res]\n * @returns {Boolean}\n */\nmodule.exports = function shouldRetry(err, res) {\n  if (err && err.code && ~ERROR_CODES.indexOf(err.code)) return true;\n  if (res && res.status && res.status >= 500) return true;\n  // Superagent timeout\n  if (err && 'timeout' in err && err.code == 'ECONNABORTED') return true;\n  if (err && 'crossDomain' in err) return true;\n  return false;\n};\n","/**\n * Root reference for iframes.\n */\n\nvar root;\nif (typeof window !== 'undefined') { // Browser window\n  root = window;\n} else if (typeof self !== 'undefined') { // Web Worker\n  root = self;\n} else { // Other environments\n  console.warn(\"Using browser-only version of superagent in non-browser environment\");\n  root = this;\n}\n\nvar Emitter = require('component-emitter');\nvar RequestBase = require('./request-base');\nvar isObject = require('./is-object');\nvar ResponseBase = require('./response-base');\nvar shouldRetry = require('./should-retry');\n\n/**\n * Noop.\n */\n\nfunction noop(){};\n\n/**\n * Expose `request`.\n */\n\nvar request = exports = module.exports = function(method, url) {\n  // callback\n  if ('function' == typeof url) {\n    return new exports.Request('GET', method).end(url);\n  }\n\n  // url first\n  if (1 == arguments.length) {\n    return new exports.Request('GET', method);\n  }\n\n  return new exports.Request(method, url);\n}\n\nexports.Request = Request;\n\n/**\n * Determine XHR.\n */\n\nrequest.getXHR = function () {\n  if (root.XMLHttpRequest\n      && (!root.location || 'file:' != root.location.protocol\n          || !root.ActiveXObject)) {\n    return new XMLHttpRequest;\n  } else {\n    try { return new ActiveXObject('Microsoft.XMLHTTP'); } catch(e) {}\n    try { return new ActiveXObject('Msxml2.XMLHTTP.6.0'); } catch(e) {}\n    try { return new ActiveXObject('Msxml2.XMLHTTP.3.0'); } catch(e) {}\n    try { return new ActiveXObject('Msxml2.XMLHTTP'); } catch(e) {}\n  }\n  throw Error(\"Browser-only version of superagent could not find XHR\");\n};\n\n/**\n * Removes leading and trailing whitespace, added to support IE.\n *\n * @param {String} s\n * @return {String}\n * @api private\n */\n\nvar trim = ''.trim\n  ? function(s) { return s.trim(); }\n  : function(s) { return s.replace(/(^\\s*|\\s*$)/g, ''); };\n\n/**\n * Serialize the given `obj`.\n *\n * @param {Object} obj\n * @return {String}\n * @api private\n */\n\nfunction serialize(obj) {\n  if (!isObject(obj)) return obj;\n  var pairs = [];\n  for (var key in obj) {\n    pushEncodedKeyValuePair(pairs, key, obj[key]);\n  }\n  return pairs.join('&');\n}\n\n/**\n * Helps 'serialize' with serializing arrays.\n * Mutates the pairs array.\n *\n * @param {Array} pairs\n * @param {String} key\n * @param {Mixed} val\n */\n\nfunction pushEncodedKeyValuePair(pairs, key, val) {\n  if (val != null) {\n    if (Array.isArray(val)) {\n      val.forEach(function(v) {\n        pushEncodedKeyValuePair(pairs, key, v);\n      });\n    } else if (isObject(val)) {\n      for(var subkey in val) {\n        pushEncodedKeyValuePair(pairs, key + '[' + subkey + ']', val[subkey]);\n      }\n    } else {\n      pairs.push(encodeURIComponent(key)\n        + '=' + encodeURIComponent(val));\n    }\n  } else if (val === null) {\n    pairs.push(encodeURIComponent(key));\n  }\n}\n\n/**\n * Expose serialization method.\n */\n\n request.serializeObject = serialize;\n\n /**\n  * Parse the given x-www-form-urlencoded `str`.\n  *\n  * @param {String} str\n  * @return {Object}\n  * @api private\n  */\n\nfunction parseString(str) {\n  var obj = {};\n  var pairs = str.split('&');\n  var pair;\n  var pos;\n\n  for (var i = 0, len = pairs.length; i < len; ++i) {\n    pair = pairs[i];\n    pos = pair.indexOf('=');\n    if (pos == -1) {\n      obj[decodeURIComponent(pair)] = '';\n    } else {\n      obj[decodeURIComponent(pair.slice(0, pos))] =\n        decodeURIComponent(pair.slice(pos + 1));\n    }\n  }\n\n  return obj;\n}\n\n/**\n * Expose parser.\n */\n\nrequest.parseString = parseString;\n\n/**\n * Default MIME type map.\n *\n *     superagent.types.xml = 'application/xml';\n *\n */\n\nrequest.types = {\n  html: 'text/html',\n  json: 'application/json',\n  xml: 'text/xml',\n  urlencoded: 'application/x-www-form-urlencoded',\n  'form': 'application/x-www-form-urlencoded',\n  'form-data': 'application/x-www-form-urlencoded'\n};\n\n/**\n * Default serialization map.\n *\n *     superagent.serialize['application/xml'] = function(obj){\n *       return 'generated xml here';\n *     };\n *\n */\n\n request.serialize = {\n   'application/x-www-form-urlencoded': serialize,\n   'application/json': JSON.stringify\n };\n\n /**\n  * Default parsers.\n  *\n  *     superagent.parse['application/xml'] = function(str){\n  *       return { object parsed from str };\n  *     };\n  *\n  */\n\nrequest.parse = {\n  'application/x-www-form-urlencoded': parseString,\n  'application/json': JSON.parse\n};\n\n/**\n * Parse the given header `str` into\n * an object containing the mapped fields.\n *\n * @param {String} str\n * @return {Object}\n * @api private\n */\n\nfunction parseHeader(str) {\n  var lines = str.split(/\\r?\\n/);\n  var fields = {};\n  var index;\n  var line;\n  var field;\n  var val;\n\n  lines.pop(); // trailing CRLF\n\n  for (var i = 0, len = lines.length; i < len; ++i) {\n    line = lines[i];\n    index = line.indexOf(':');\n    field = line.slice(0, index).toLowerCase();\n    val = trim(line.slice(index + 1));\n    fields[field] = val;\n  }\n\n  return fields;\n}\n\n/**\n * Check if `mime` is json or has +json structured syntax suffix.\n *\n * @param {String} mime\n * @return {Boolean}\n * @api private\n */\n\nfunction isJSON(mime) {\n  return /[\\/+]json\\b/.test(mime);\n}\n\n/**\n * Initialize a new `Response` with the given `xhr`.\n *\n *  - set flags (.ok, .error, etc)\n *  - parse header\n *\n * Examples:\n *\n *  Aliasing `superagent` as `request` is nice:\n *\n *      request = superagent;\n *\n *  We can use the promise-like API, or pass callbacks:\n *\n *      request.get('/').end(function(res){});\n *      request.get('/', function(res){});\n *\n *  Sending data can be chained:\n *\n *      request\n *        .post('/user')\n *        .send({ name: 'tj' })\n *        .end(function(res){});\n *\n *  Or passed to `.send()`:\n *\n *      request\n *        .post('/user')\n *        .send({ name: 'tj' }, function(res){});\n *\n *  Or passed to `.post()`:\n *\n *      request\n *        .post('/user', { name: 'tj' })\n *        .end(function(res){});\n *\n * Or further reduced to a single call for simple cases:\n *\n *      request\n *        .post('/user', { name: 'tj' }, function(res){});\n *\n * @param {XMLHTTPRequest} xhr\n * @param {Object} options\n * @api private\n */\n\nfunction Response(req) {\n  this.req = req;\n  this.xhr = this.req.xhr;\n  // responseText is accessible only if responseType is '' or 'text' and on older browsers\n  this.text = ((this.req.method !='HEAD' && (this.xhr.responseType === '' || this.xhr.responseType === 'text')) || typeof this.xhr.responseType === 'undefined')\n     ? this.xhr.responseText\n     : null;\n  this.statusText = this.req.xhr.statusText;\n  var status = this.xhr.status;\n  // handle IE9 bug: http://stackoverflow.com/questions/10046972/msie-returns-status-code-of-1223-for-ajax-request\n  if (status === 1223) {\n      status = 204;\n  }\n  this._setStatusProperties(status);\n  this.header = this.headers = parseHeader(this.xhr.getAllResponseHeaders());\n  // getAllResponseHeaders sometimes falsely returns \"\" for CORS requests, but\n  // getResponseHeader still works. so we get content-type even if getting\n  // other headers fails.\n  this.header['content-type'] = this.xhr.getResponseHeader('content-type');\n  this._setHeaderProperties(this.header);\n\n  if (null === this.text && req._responseType) {\n    this.body = this.xhr.response;\n  } else {\n    this.body = this.req.method != 'HEAD'\n      ? this._parseBody(this.text ? this.text : this.xhr.response)\n      : null;\n  }\n}\n\nResponseBase(Response.prototype);\n\n/**\n * Parse the given body `str`.\n *\n * Used for auto-parsing of bodies. Parsers\n * are defined on the `superagent.parse` object.\n *\n * @param {String} str\n * @return {Mixed}\n * @api private\n */\n\nResponse.prototype._parseBody = function(str){\n  var parse = request.parse[this.type];\n  if(this.req._parser) {\n    return this.req._parser(this, str);\n  }\n  if (!parse && isJSON(this.type)) {\n    parse = request.parse['application/json'];\n  }\n  return parse && str && (str.length || str instanceof Object)\n    ? parse(str)\n    : null;\n};\n\n/**\n * Return an `Error` representative of this response.\n *\n * @return {Error}\n * @api public\n */\n\nResponse.prototype.toError = function(){\n  var req = this.req;\n  var method = req.method;\n  var url = req.url;\n\n  var msg = 'cannot ' + method + ' ' + url + ' (' + this.status + ')';\n  var err = new Error(msg);\n  err.status = this.status;\n  err.method = method;\n  err.url = url;\n\n  return err;\n};\n\n/**\n * Expose `Response`.\n */\n\nrequest.Response = Response;\n\n/**\n * Initialize a new `Request` with the given `method` and `url`.\n *\n * @param {String} method\n * @param {String} url\n * @api public\n */\n\nfunction Request(method, url) {\n  var self = this;\n  this._query = this._query || [];\n  this.method = method;\n  this.url = url;\n  this.header = {}; // preserves header name case\n  this._header = {}; // coerces header names to lowercase\n  this.on('end', function(){\n    var err = null;\n    var res = null;\n\n    try {\n      res = new Response(self);\n    } catch(e) {\n      err = new Error('Parser is unable to parse the response');\n      err.parse = true;\n      err.original = e;\n      // issue #675: return the raw response if the response parsing fails\n      if (self.xhr) {\n        // ie9 doesn't have 'response' property\n        err.rawResponse = typeof self.xhr.responseType == 'undefined' ? self.xhr.responseText : self.xhr.response;\n        // issue #876: return the http status code if the response parsing fails\n        err.status = self.xhr.status ? self.xhr.status : null;\n        err.statusCode = err.status; // backwards-compat only\n      } else {\n        err.rawResponse = null;\n        err.status = null;\n      }\n\n      return self.callback(err);\n    }\n\n    self.emit('response', res);\n\n    var new_err;\n    try {\n      if (!self._isResponseOK(res)) {\n        new_err = new Error(res.statusText || 'Unsuccessful HTTP response');\n        new_err.original = err;\n        new_err.response = res;\n        new_err.status = res.status;\n      }\n    } catch(e) {\n      new_err = e; // #985 touching res may cause INVALID_STATE_ERR on old Android\n    }\n\n    // #1000 don't catch errors from the callback to avoid double calling it\n    if (new_err) {\n      self.callback(new_err, res);\n    } else {\n      self.callback(null, res);\n    }\n  });\n}\n\n/**\n * Mixin `Emitter` and `RequestBase`.\n */\n\nEmitter(Request.prototype);\nRequestBase(Request.prototype);\n\n/**\n * Set Content-Type to `type`, mapping values from `request.types`.\n *\n * Examples:\n *\n *      superagent.types.xml = 'application/xml';\n *\n *      request.post('/')\n *        .type('xml')\n *        .send(xmlstring)\n *        .end(callback);\n *\n *      request.post('/')\n *        .type('application/xml')\n *        .send(xmlstring)\n *        .end(callback);\n *\n * @param {String} type\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.type = function(type){\n  this.set('Content-Type', request.types[type] || type);\n  return this;\n};\n\n/**\n * Set Accept to `type`, mapping values from `request.types`.\n *\n * Examples:\n *\n *      superagent.types.json = 'application/json';\n *\n *      request.get('/agent')\n *        .accept('json')\n *        .end(callback);\n *\n *      request.get('/agent')\n *        .accept('application/json')\n *        .end(callback);\n *\n * @param {String} accept\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.accept = function(type){\n  this.set('Accept', request.types[type] || type);\n  return this;\n};\n\n/**\n * Set Authorization field value with `user` and `pass`.\n *\n * @param {String} user\n * @param {String} [pass] optional in case of using 'bearer' as type\n * @param {Object} options with 'type' property 'auto', 'basic' or 'bearer' (default 'basic')\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.auth = function(user, pass, options){\n  if (typeof pass === 'object' && pass !== null) { // pass is optional and can substitute for options\n    options = pass;\n  }\n  if (!options) {\n    options = {\n      type: 'function' === typeof btoa ? 'basic' : 'auto',\n    }\n  }\n\n  switch (options.type) {\n    case 'basic':\n      this.set('Authorization', 'Basic ' + btoa(user + ':' + pass));\n    break;\n\n    case 'auto':\n      this.username = user;\n      this.password = pass;\n    break;\n\n    case 'bearer': // usage would be .auth(accessToken, { type: 'bearer' })\n      this.set('Authorization', 'Bearer ' + user);\n    break;\n  }\n  return this;\n};\n\n/**\n * Add query-string `val`.\n *\n * Examples:\n *\n *   request.get('/shoes')\n *     .query('size=10')\n *     .query({ color: 'blue' })\n *\n * @param {Object|String} val\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.query = function(val){\n  if ('string' != typeof val) val = serialize(val);\n  if (val) this._query.push(val);\n  return this;\n};\n\n/**\n * Queue the given `file` as an attachment to the specified `field`,\n * with optional `options` (or filename).\n *\n * ``` js\n * request.post('/upload')\n *   .attach('content', new Blob(['<a id=\"a\"><b id=\"b\">hey!</b></a>'], { type: \"text/html\"}))\n *   .end(callback);\n * ```\n *\n * @param {String} field\n * @param {Blob|File} file\n * @param {String|Object} options\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.attach = function(field, file, options){\n  if (file) {\n    if (this._data) {\n      throw Error(\"superagent can't mix .send() and .attach()\");\n    }\n\n    this._getFormData().append(field, file, options || file.name);\n  }\n  return this;\n};\n\nRequest.prototype._getFormData = function(){\n  if (!this._formData) {\n    this._formData = new root.FormData();\n  }\n  return this._formData;\n};\n\n/**\n * Invoke the callback with `err` and `res`\n * and handle arity check.\n *\n * @param {Error} err\n * @param {Response} res\n * @api private\n */\n\nRequest.prototype.callback = function(err, res){\n  // console.log(this._retries, this._maxRetries)\n  if (this._maxRetries && this._retries++ < this._maxRetries && shouldRetry(err, res)) {\n    return this._retry();\n  }\n\n  var fn = this._callback;\n  this.clearTimeout();\n\n  if (err) {\n    if (this._maxRetries) err.retries = this._retries - 1;\n    this.emit('error', err);\n  }\n\n  fn(err, res);\n};\n\n/**\n * Invoke callback with x-domain error.\n *\n * @api private\n */\n\nRequest.prototype.crossDomainError = function(){\n  var err = new Error('Request has been terminated\\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.');\n  err.crossDomain = true;\n\n  err.status = this.status;\n  err.method = this.method;\n  err.url = this.url;\n\n  this.callback(err);\n};\n\n// This only warns, because the request is still likely to work\nRequest.prototype.buffer = Request.prototype.ca = Request.prototype.agent = function(){\n  console.warn(\"This is not supported in browser version of superagent\");\n  return this;\n};\n\n// This throws, because it can't send/receive data as expected\nRequest.prototype.pipe = Request.prototype.write = function(){\n  throw Error(\"Streaming is not supported in browser version of superagent\");\n};\n\n/**\n * Check if `obj` is a host object,\n * we don't want to serialize these :)\n *\n * @param {Object} obj\n * @return {Boolean}\n * @api private\n */\nRequest.prototype._isHost = function _isHost(obj) {\n  // Native objects stringify to [object File], [object Blob], [object FormData], etc.\n  return obj && 'object' === typeof obj && !Array.isArray(obj) && Object.prototype.toString.call(obj) !== '[object Object]';\n}\n\n/**\n * Initiate request, invoking callback `fn(res)`\n * with an instanceof `Response`.\n *\n * @param {Function} fn\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.end = function(fn){\n  if (this._endCalled) {\n    console.warn(\"Warning: .end() was called twice. This is not supported in superagent\");\n  }\n  this._endCalled = true;\n\n  // store callback\n  this._callback = fn || noop;\n\n  // querystring\n  this._finalizeQueryString();\n\n  return this._end();\n};\n\nRequest.prototype._end = function() {\n  var self = this;\n  var xhr = this.xhr = request.getXHR();\n  var data = this._formData || this._data;\n\n  this._setTimeouts();\n\n  // state change\n  xhr.onreadystatechange = function(){\n    var readyState = xhr.readyState;\n    if (readyState >= 2 && self._responseTimeoutTimer) {\n      clearTimeout(self._responseTimeoutTimer);\n    }\n    if (4 != readyState) {\n      return;\n    }\n\n    // In IE9, reads to any property (e.g. status) off of an aborted XHR will\n    // result in the error \"Could not complete the operation due to error c00c023f\"\n    var status;\n    try { status = xhr.status } catch(e) { status = 0; }\n\n    if (!status) {\n      if (self.timedout || self._aborted) return;\n      return self.crossDomainError();\n    }\n    self.emit('end');\n  };\n\n  // progress\n  var handleProgress = function(direction, e) {\n    if (e.total > 0) {\n      e.percent = e.loaded / e.total * 100;\n    }\n    e.direction = direction;\n    self.emit('progress', e);\n  }\n  if (this.hasListeners('progress')) {\n    try {\n      xhr.onprogress = handleProgress.bind(null, 'download');\n      if (xhr.upload) {\n        xhr.upload.onprogress = handleProgress.bind(null, 'upload');\n      }\n    } catch(e) {\n      // Accessing xhr.upload fails in IE from a web worker, so just pretend it doesn't exist.\n      // Reported here:\n      // https://connect.microsoft.com/IE/feedback/details/837245/xmlhttprequest-upload-throws-invalid-argument-when-used-from-web-worker-context\n    }\n  }\n\n  // initiate request\n  try {\n    if (this.username && this.password) {\n      xhr.open(this.method, this.url, true, this.username, this.password);\n    } else {\n      xhr.open(this.method, this.url, true);\n    }\n  } catch (err) {\n    // see #1149\n    return this.callback(err);\n  }\n\n  // CORS\n  if (this._withCredentials) xhr.withCredentials = true;\n\n  // body\n  if (!this._formData && 'GET' != this.method && 'HEAD' != this.method && 'string' != typeof data && !this._isHost(data)) {\n    // serialize stuff\n    var contentType = this._header['content-type'];\n    var serialize = this._serializer || request.serialize[contentType ? contentType.split(';')[0] : ''];\n    if (!serialize && isJSON(contentType)) {\n      serialize = request.serialize['application/json'];\n    }\n    if (serialize) data = serialize(data);\n  }\n\n  // set header fields\n  for (var field in this.header) {\n    if (null == this.header[field]) continue;\n\n    if (this.header.hasOwnProperty(field))\n      xhr.setRequestHeader(field, this.header[field]);\n  }\n\n  if (this._responseType) {\n    xhr.responseType = this._responseType;\n  }\n\n  // send stuff\n  this.emit('request', this);\n\n  // IE11 xhr.send(undefined) sends 'undefined' string as POST payload (instead of nothing)\n  // We need null here if data is undefined\n  xhr.send(typeof data !== 'undefined' ? data : null);\n  return this;\n};\n\n/**\n * GET `url` with optional callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed|Function} [data] or fn\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nrequest.get = function(url, data, fn){\n  var req = request('GET', url);\n  if ('function' == typeof data) fn = data, data = null;\n  if (data) req.query(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * HEAD `url` with optional callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed|Function} [data] or fn\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nrequest.head = function(url, data, fn){\n  var req = request('HEAD', url);\n  if ('function' == typeof data) fn = data, data = null;\n  if (data) req.query(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * OPTIONS query to `url` with optional callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed|Function} [data] or fn\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nrequest.options = function(url, data, fn){\n  var req = request('OPTIONS', url);\n  if ('function' == typeof data) fn = data, data = null;\n  if (data) req.send(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * DELETE `url` with optional `data` and callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed} [data]\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nfunction del(url, data, fn){\n  var req = request('DELETE', url);\n  if ('function' == typeof data) fn = data, data = null;\n  if (data) req.send(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\nrequest['del'] = del;\nrequest['delete'] = del;\n\n/**\n * PATCH `url` with optional `data` and callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed} [data]\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nrequest.patch = function(url, data, fn){\n  var req = request('PATCH', url);\n  if ('function' == typeof data) fn = data, data = null;\n  if (data) req.send(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * POST `url` with optional `data` and callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed} [data]\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nrequest.post = function(url, data, fn){\n  var req = request('POST', url);\n  if ('function' == typeof data) fn = data, data = null;\n  if (data) req.send(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * PUT `url` with optional `data` and callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed|Function} [data] or fn\n * @param {Function} [fn]\n * @return {Request}\n * @api public\n */\n\nrequest.put = function(url, data, fn){\n  var req = request('PUT', url);\n  if ('function' == typeof data) fn = data, data = null;\n  if (data) req.send(data);\n  if (fn) req.end(fn);\n  return req;\n};\n","import * as request from 'superagent';\n/**\n * `Client` is for making HTTP requests to the API.\n *\n * Under the hood, it uses\n * [superagent](http://visionmedia.github.io/superagent/). When a method is\n * called, you can call any number of superagent functions on it and then call\n * `end()` to complete and send the request.\n *\n * @featured\n */\nvar Client = (function () {\n    function Client(\n        /**\n         * @hidden\n         */\n        tokenContext, \n        /**\n         * @hidden\n         */\n        baseUrl, req // TODO: use superagent types\n    ) {\n        this.tokenContext = tokenContext;\n        this.baseUrl = baseUrl;\n        if (typeof req === 'undefined') {\n            req = request['default'] || request;\n        }\n        this.req = req;\n    }\n    /**\n     * GET request for retrieving a resource from the API.\n     *\n     * @param endpoint - The path of the API endpoint.\n     */\n    Client.prototype.get = function (endpoint) {\n        return this.supplement(this.req.get, endpoint);\n    };\n    /**\n     * POST request for sending a new resource to the API.\n     *\n     * @param endpoint - The path of the API endpoint.\n     */\n    Client.prototype.post = function (endpoint) {\n        return this.supplement(this.req.post, endpoint);\n    };\n    /**\n     * PUT request for replacing a resource in the API.\n     *\n     * @param endpoint - The path of the API endpoint.\n     */\n    Client.prototype.put = function (endpoint) {\n        return this.supplement(this.req.put, endpoint);\n    };\n    /**\n     * PATCH request for performing partial updates to a resource in the API.\n     *\n     * @param endpoint - The path of the API endpoint.\n     */\n    Client.prototype.patch = function (endpoint) {\n        return this.supplement(this.req.patch, endpoint);\n    };\n    /**\n     * DELETE request for deleting a resource from the API.\n     *\n     * @param endpoint - The path of the API endpoint.\n     */\n    Client.prototype.delete = function (endpoint) {\n        return this.supplement(this.req.delete, endpoint);\n    };\n    /**\n     * @hidden\n     */\n    Client.prototype.request = function (method, endpoint) {\n        return this.supplement(this.req.bind(this.req, method), endpoint);\n    };\n    /**\n     * @private\n     */\n    Client.prototype.supplement = function (fn, endpoint) {\n        if (endpoint.substring(0, 1) !== '/') {\n            throw Error('endpoint must start with leading slash');\n        }\n        var req = fn(this.baseUrl + endpoint);\n        var token = this.tokenContext.get();\n        if (token) {\n            req.set('Authorization', \"Bearer \" + token);\n        }\n        return req;\n    };\n    return Client;\n}());\nexport { Client };\n","/**\n * @hidden\n */\nvar Config = (function () {\n    function Config() {\n        /**\n         * @private\n         */\n        this.urls = {\n            'api': 'https://api.ionic.io',\n            'web': 'https://web.ionic.io'\n        };\n    }\n    /**\n     * Register a new config.\n     */\n    Config.prototype.register = function (settings) {\n        this.settings = settings;\n    };\n    /**\n     * Get a value from the core settings. You should use `settings` attribute\n     * directly for core settings and other settings.\n     *\n     * @deprecated\n     *\n     * @param name - The settings key to get.\n     */\n    Config.prototype.get = function (name) {\n        if (!this.settings || !this.settings.core) {\n            return undefined;\n        }\n        return this.settings.core[name];\n    };\n    /**\n     * @hidden\n     */\n    Config.prototype.getURL = function (name) {\n        var urls = (this.settings && this.settings.core && this.settings.core.urls) || {};\n        if (urls[name]) {\n            return urls[name];\n        }\n        return this.urls[name];\n    };\n    return Config;\n}());\nexport { Config };\n","/**\n * @hidden\n */\nvar Cordova = (function () {\n    function Cordova(deps, options) {\n        if (options === void 0) { options = {}; }\n        this.options = options;\n        this.app = deps.appStatus;\n        this.device = deps.device;\n        this.emitter = deps.emitter;\n        this.logger = deps.logger;\n        this.registerEventHandlers();\n    }\n    Cordova.prototype.bootstrap = function () {\n        var _this = this;\n        var events = ['pause', 'resume'];\n        document.addEventListener('deviceready', function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            _this.emitter.emit('cordova:deviceready', { 'args': args });\n            var _loop_1 = function (e) {\n                document.addEventListener(e, function () {\n                    var args = [];\n                    for (var _i = 0; _i < arguments.length; _i++) {\n                        args[_i] = arguments[_i];\n                    }\n                    _this.emitter.emit('cordova:' + e, { 'args': args });\n                }, false);\n            };\n            for (var _a = 0, events_1 = events; _a < events_1.length; _a++) {\n                var e = events_1[_a];\n                _loop_1(e);\n            }\n        }, false);\n    };\n    /**\n     * @private\n     */\n    Cordova.prototype.registerEventHandlers = function () {\n        var _this = this;\n        this.emitter.on('cordova:pause', function () {\n            _this.app.closed = true;\n        });\n        this.emitter.on('cordova:resume', function () {\n            _this.app.closed = false;\n        });\n    };\n    return Cordova;\n}());\nexport { Cordova };\n","/**\n * @hidden\n */\nvar Core = (function () {\n    function Core(deps) {\n        /**\n         * @private\n         */\n        this._version = 'VERSION_STRING';\n        this.config = deps.config;\n        this.logger = deps.logger;\n        this.emitter = deps.emitter;\n        this.insights = deps.insights;\n    }\n    Core.prototype.init = function () {\n        this.registerEventHandlers();\n        this.onResume();\n    };\n    Object.defineProperty(Core.prototype, \"version\", {\n        get: function () {\n            return this._version;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * @private\n     */\n    Core.prototype.onResume = function () {\n        if (this.insights.options.enabled) {\n            this.insights.track('mobileapp.opened');\n        }\n    };\n    /**\n     * @private\n     */\n    Core.prototype.registerEventHandlers = function () {\n        var _this = this;\n        this.emitter.on('cordova:resume', function () {\n            _this.onResume();\n        });\n        this.emitter.on('push:notification', function (data) {\n            if (data.message.app.asleep || data.message.app.closed) {\n                if (_this.insights.options.enabled) {\n                    _this.insights.track('mobileapp.opened.push');\n                }\n            }\n        });\n    };\n    return Core;\n}());\nexport { Core };\n","import { DeferredPromise } from '../promise';\nvar NO_PLUGIN = new Error('Missing deploy plugin: `ionic-plugin-deploy`');\n/**\n * `Deploy` handles live deploys of the app. Downloading, extracting, and\n * rolling back snapshots.\n *\n * @featured\n */\nvar Deploy = (function () {\n    function Deploy(deps, \n        /**\n         * @hidden\n         */\n        options) {\n        if (options === void 0) { options = {}; }\n        var _this = this;\n        this.options = options;\n        /**\n         * The active deploy channel. Set this to change the channel on which\n         * `Deploy` operates.\n         */\n        this.channel = 'production';\n        this.config = deps.config;\n        this.emitter = deps.emitter;\n        this.logger = deps.logger;\n        this.emitter.once('device:ready', function () {\n            if (_this._getPlugin()) {\n                _this.plugin.init(_this.config.get('app_id'), _this.config.getURL('api'));\n            }\n            _this.emitter.emit('deploy:ready');\n        });\n    }\n    /**\n     * Check for updates on the active channel.\n     *\n     * The promise resolves with a boolean. When `true`, a new snapshot exists on\n     * the channel.\n     */\n    Deploy.prototype.check = function () {\n        var _this = this;\n        var deferred = new DeferredPromise();\n        this.emitter.once('deploy:ready', function () {\n            if (_this._getPlugin()) {\n                _this.plugin.check(_this.config.get('app_id'), _this.channel, function (result) {\n                    if (result && result === 'true') {\n                        _this.logger.info('Ionic Deploy: an update is available');\n                        deferred.resolve(true);\n                    }\n                    else {\n                        _this.logger.info('Ionic Deploy: no updates available');\n                        deferred.resolve(false);\n                    }\n                }, function (error) {\n                    _this.logger.error('Ionic Deploy: encountered an error while checking for updates');\n                    deferred.reject(error);\n                });\n            }\n            else {\n                deferred.reject(NO_PLUGIN);\n            }\n        });\n        return deferred.promise;\n    };\n    /**\n     * Download the available snapshot.\n     *\n     * This should be used in conjunction with\n     * [`extract()`](/api/client/deploy/#extract).\n     *\n     * @param options\n     *  Options for this download, such as a progress callback.\n     */\n    Deploy.prototype.download = function (options) {\n        var _this = this;\n        if (options === void 0) { options = {}; }\n        var deferred = new DeferredPromise();\n        this.emitter.once('deploy:ready', function () {\n            if (_this._getPlugin()) {\n                _this.plugin.download(_this.config.get('app_id'), function (result) {\n                    if (result === 'true') {\n                        _this.logger.info('Ionic Deploy: download complete');\n                        deferred.resolve();\n                    }\n                    else if (result === 'false') {\n                        deferred.reject(new Error('Ionic Deploy: Download has failed: see native logs.'));\n                    }\n                    else {\n                        if (options.onProgress) {\n                            options.onProgress(result);\n                        }\n                    }\n                }, function (error) {\n                    deferred.reject(error);\n                });\n            }\n            else {\n                deferred.reject(NO_PLUGIN);\n            }\n        });\n        return deferred.promise;\n    };\n    /**\n     * Extract the downloaded snapshot.\n     *\n     * This should be called after [`download()`](/api/client/deploy/#download)\n     * successfully resolves.\n     *\n     * @param options\n     */\n    Deploy.prototype.extract = function (options) {\n        var _this = this;\n        if (options === void 0) { options = {}; }\n        var deferred = new DeferredPromise();\n        this.emitter.once('deploy:ready', function () {\n            if (_this._getPlugin()) {\n                _this.plugin.extract(_this.config.get('app_id'), function (result) {\n                    if (result === 'done') {\n                        _this.logger.info('Ionic Deploy: extraction complete');\n                        deferred.resolve();\n                    }\n                    else {\n                        if (options.onProgress) {\n                            options.onProgress(result);\n                        }\n                    }\n                }, function (error) {\n                    deferred.reject(error);\n                });\n            }\n            else {\n                deferred.reject(NO_PLUGIN);\n            }\n        });\n        return deferred.promise;\n    };\n    /**\n     * Immediately reload the app with the latest deployed snapshot.\n     *\n     * This is only necessary to call if you have downloaded and extracted a\n     * snapshot and wish to instantly reload the app with the latest deploy. The\n     * latest deploy will automatically be loaded when the app is started.\n     */\n    Deploy.prototype.load = function () {\n        var _this = this;\n        this.emitter.once('deploy:ready', function () {\n            if (_this._getPlugin()) {\n                _this.plugin.redirect(_this.config.get('app_id'));\n            }\n        });\n    };\n    /**\n     * Get information about the current snapshot.\n     *\n     * The promise is resolved with an object that has key/value pairs pertaining\n     * to the currently deployed snapshot.\n     */\n    Deploy.prototype.info = function () {\n        var _this = this;\n        var deferred = new DeferredPromise(); // TODO\n        this.emitter.once('deploy:ready', function () {\n            if (_this._getPlugin()) {\n                _this.plugin.info(_this.config.get('app_id'), function (result) {\n                    deferred.resolve(result);\n                }, function (err) {\n                    deferred.reject(err);\n                });\n            }\n            else {\n                deferred.reject(NO_PLUGIN);\n            }\n        });\n        return deferred.promise;\n    };\n    /**\n     * List the snapshots that have been installed on this device.\n     *\n     * The promise is resolved with an array of snapshot UUIDs.\n     */\n    Deploy.prototype.getSnapshots = function () {\n        var _this = this;\n        var deferred = new DeferredPromise(); // TODO\n        this.emitter.once('deploy:ready', function () {\n            if (_this._getPlugin()) {\n                _this.plugin.getVersions(_this.config.get('app_id'), function (result) {\n                    deferred.resolve(result);\n                }, function (err) {\n                    deferred.reject(err);\n                });\n            }\n            else {\n                deferred.reject(NO_PLUGIN);\n            }\n        });\n        return deferred.promise;\n    };\n    /**\n     * Remove a snapshot from this device.\n     *\n     * @param uuid\n     *  The snapshot UUID to remove from the device.\n     */\n    Deploy.prototype.deleteSnapshot = function (uuid) {\n        var _this = this;\n        var deferred = new DeferredPromise(); // TODO\n        this.emitter.once('deploy:ready', function () {\n            if (_this._getPlugin()) {\n                _this.plugin.deleteVersion(_this.config.get('app_id'), uuid, function (result) {\n                    deferred.resolve(result);\n                }, function (err) {\n                    deferred.reject(err);\n                });\n            }\n            else {\n                deferred.reject(NO_PLUGIN);\n            }\n        });\n        return deferred.promise;\n    };\n    /**\n     * Fetches the metadata for a given snapshot. If no UUID is given, it will\n     * attempt to grab the metadata for the most recently known snapshot.\n     *\n     * @param uuid\n     *  The snapshot from which to grab metadata.\n     */\n    Deploy.prototype.getMetadata = function (uuid) {\n        var _this = this;\n        var deferred = new DeferredPromise(); // TODO\n        this.emitter.once('deploy:ready', function () {\n            if (_this._getPlugin()) {\n                _this.plugin.getMetadata(_this.config.get('app_id'), uuid, function (result) {\n                    deferred.resolve(result.metadata);\n                }, function (err) {\n                    deferred.reject(err);\n                });\n            }\n            else {\n                deferred.reject(NO_PLUGIN);\n            }\n        });\n        return deferred.promise;\n    };\n    /**\n     * @private\n     */\n    Deploy.prototype._getPlugin = function () {\n        if (typeof window.IonicDeploy === 'undefined') {\n            this.logger.warn('Ionic Deploy: Disabled! Deploy plugin is not installed or has not loaded. Have you run `ionic plugin add ionic-plugin-deploy` yet?');\n            return;\n        }\n        if (!this.plugin) {\n            this.plugin = window.IonicDeploy;\n        }\n        return this.plugin;\n    };\n    return Deploy;\n}());\nexport { Deploy };\n","/**\n * @hidden\n */\nvar Device = (function () {\n    function Device(deps) {\n        this.deps = deps;\n        this.native = this.deps.nativeDevice;\n        this.emitter = this.deps.emitter;\n        this.type = this.determineDeviceType();\n        this.registerEventHandlers();\n    }\n    Device.prototype.isAndroid = function () {\n        return this.type === 'android';\n    };\n    Device.prototype.isIOS = function () {\n        return this.type === 'iphone' || this.type === 'ipad';\n    };\n    Device.prototype.isConnectedToNetwork = function (options) {\n        if (options === void 0) { options = {}; }\n        if (typeof navigator.connection === 'undefined' ||\n            typeof navigator.connection.type === 'undefined' ||\n            typeof Connection === 'undefined') {\n            if (!options.strictMode) {\n                return true;\n            }\n            return false;\n        }\n        switch (navigator.connection.type) {\n            case Connection.ETHERNET:\n            case Connection.WIFI:\n            case Connection.CELL_2G:\n            case Connection.CELL_3G:\n            case Connection.CELL_4G:\n            case Connection.CELL:\n                return true;\n            default:\n                return false;\n        }\n    };\n    /**\n     * @private\n     */\n    Device.prototype.registerEventHandlers = function () {\n        var _this = this;\n        if (this.type === 'unknown') {\n            this.emitter.emit('device:ready');\n        }\n        else {\n            this.emitter.once('cordova:deviceready', function () {\n                _this.emitter.emit('device:ready');\n            });\n        }\n    };\n    /**\n     * @private\n     */\n    Device.prototype.determineDeviceType = function () {\n        var agent = navigator.userAgent;\n        var ipad = agent.match(/iPad/i);\n        if (ipad && (ipad[0].toLowerCase() === 'ipad')) {\n            return 'ipad';\n        }\n        var iphone = agent.match(/iPhone/i);\n        if (iphone && (iphone[0].toLowerCase() === 'iphone')) {\n            return 'iphone';\n        }\n        var android = agent.match(/Android/i);\n        if (android && (android[0].toLowerCase() === 'android')) {\n            return 'android';\n        }\n        return 'unknown';\n    };\n    return Device;\n}());\nexport { Device };\n","/**\n * A registered event receiver.\n */\nvar EventReceiver = (function () {\n    function EventReceiver(\n        /**\n         * An registered identifier for this event receiver.\n         */\n        key, \n        /**\n         * The registered name of the event.\n         */\n        event, \n        /**\n         * The actual callback.\n         */\n        handler) {\n        this.key = key;\n        this.event = event;\n        this.handler = handler;\n    }\n    return EventReceiver;\n}());\nexport { EventReceiver };\n/**\n * Stores callbacks for registered events.\n */\nvar EventEmitter = (function () {\n    function EventEmitter() {\n        /**\n         * @private\n         */\n        this.n = 0;\n        /**\n         * @private\n         */\n        this.eventReceivers = {};\n        /**\n         * @private\n         */\n        this.eventsEmitted = {};\n    }\n    /**\n     * Register an event callback which gets triggered every time the event is\n     * fired.\n     *\n     * @param event\n     *  The event name.\n     * @param callback\n     *  A callback to attach to this event.\n     */\n    EventEmitter.prototype.on = function (event, callback) {\n        if (typeof this.eventReceivers[event] === 'undefined') {\n            this.eventReceivers[event] = {};\n        }\n        var receiver = new EventReceiver(this.n, event, callback);\n        this.n++;\n        this.eventReceivers[event][receiver.key] = receiver;\n        return receiver;\n    };\n    /**\n     * Unregister an event receiver returned from\n     * [`on()`](/api/client/eventemitter#on).\n     *\n     * @param receiver\n     *  The event receiver.\n     */\n    EventEmitter.prototype.off = function (receiver) {\n        if (typeof this.eventReceivers[receiver.event] === 'undefined' ||\n            typeof this.eventReceivers[receiver.event][receiver.key] === 'undefined') {\n            throw new Error('unknown event receiver');\n        }\n        delete this.eventReceivers[receiver.event][receiver.key];\n    };\n    /**\n     * Register an event callback that gets triggered only once. If the event was\n     * triggered before your callback is registered, it calls your callback\n     * immediately.\n     *\n     * @note TODO: Fix the docs for () => void syntax.\n     *\n     * @param event\n     *  The event name.\n     * @param callback\n     *  A callback to attach to this event. It takes no arguments.\n     */\n    EventEmitter.prototype.once = function (event, callback) {\n        var _this = this;\n        if (this.emitted(event)) {\n            callback();\n        }\n        else {\n            this.on(event, function () {\n                if (!_this.emitted(event)) {\n                    callback();\n                }\n            });\n        }\n    };\n    /**\n     * Trigger an event. Call all callbacks in the order they were registered.\n     *\n     * @param event\n     *  The event name.\n     * @param data\n     *  An object to pass to every callback.\n     */\n    EventEmitter.prototype.emit = function (event, data) {\n        if (typeof this.eventReceivers[event] === 'undefined') {\n            this.eventReceivers[event] = {};\n        }\n        if (typeof this.eventsEmitted[event] === 'undefined') {\n            this.eventsEmitted[event] = 0;\n        }\n        for (var k in this.eventReceivers[event]) {\n            this.eventReceivers[event][k].handler(data);\n        }\n        this.eventsEmitted[event] += 1;\n    };\n    /**\n     * Return a count of the number of times an event has been triggered.\n     *\n     * @param event\n     *  The event name.\n     */\n    EventEmitter.prototype.emitted = function (event) {\n        if (typeof this.eventsEmitted[event] === 'undefined') {\n            return 0;\n        }\n        return this.eventsEmitted[event];\n    };\n    return EventEmitter;\n}());\nexport { EventEmitter };\n","import { parseSemanticVersion } from './util';\n/**\n * @hidden\n */\nvar Stat = (function () {\n    function Stat(appId, stat, value) {\n        if (value === void 0) { value = 1; }\n        this.appId = appId;\n        this.stat = stat;\n        this.value = value;\n        this.appId = appId;\n        this.stat = stat;\n        this.value = value;\n        this.created = new Date();\n    }\n    Stat.prototype.toJSON = function () {\n        return {\n            app_id: this.appId,\n            stat: this.stat,\n            value: this.value,\n            created: this.created.toISOString(),\n        };\n    };\n    return Stat;\n}());\nexport { Stat };\n/**\n * A client for Insights that handles batching, user activity insight, and\n * sending insights at an interval.\n *\n * @featured\n */\nvar Insights = (function () {\n    function Insights(deps, options) {\n        if (options === void 0) { options = {}; }\n        var _this = this;\n        this.options = options;\n        this.app = deps.appStatus;\n        this.storage = deps.storage;\n        this.config = deps.config;\n        this.client = deps.client;\n        this.device = deps.device;\n        this.logger = deps.logger;\n        this.batch = [];\n        if (typeof this.options.enabled === 'undefined') {\n            this.options.enabled = true;\n        }\n        if (typeof this.options.intervalSubmit === 'undefined') {\n            this.options.intervalSubmit = 60 * 1000;\n        }\n        if (typeof this.options.intervalActiveCheck === 'undefined') {\n            this.options.intervalActiveCheck = 1000;\n        }\n        if (typeof this.options.submitCount === 'undefined') {\n            this.options.submitCount = 100;\n        }\n        if (this.options.enabled) {\n            if (this.options.intervalSubmit) {\n                setInterval(function () {\n                    _this.submit();\n                }, this.options.intervalSubmit);\n            }\n            if (this.options.intervalActiveCheck) {\n                setInterval(function () {\n                    if (!_this.app.closed) {\n                        _this.checkActivity();\n                    }\n                }, this.options.intervalActiveCheck);\n            }\n        }\n    }\n    /**\n     * Track an insight.\n     *\n     * Insights are put into a submission queue for batching to save network\n     * usage. This means that insights aren't sent immediately when this method\n     * is called.\n     *\n     * @param stat - The insight name. Insights tracked by the Cloud Client must\n     * have the prefix `mobileapp`. For example, an insight would track the\n     * number of login button clicks could be named\n     * `mobileapp.login_button.clicks`.\n     * @param value - The number by which to increment this insight (defaults to 1).\n     */\n    Insights.prototype.track = function (stat, value) {\n        if (value === void 0) { value = 1; }\n        if (this.options.enabled) {\n            this.trackStat(new Stat(this.config.get('app_id'), stat, value));\n        }\n        else {\n            this.logger.warn('Ionic Insights: Will not track(), insights are not enabled.');\n        }\n    };\n    /**\n     * @private\n     */\n    Insights.prototype.checkActivity = function () {\n        var session = this.storage.get('insights_session');\n        if (!session) {\n            this.markActive();\n        }\n        else {\n            var d = new Date(session);\n            var hour = 60 * 60 * 1000;\n            if (d.getTime() + hour < new Date().getTime()) {\n                this.markActive();\n            }\n        }\n    };\n    /**\n     * @private\n     */\n    Insights.prototype.markActive = function () {\n        this.track('mobileapp.active');\n        if (!this.device.native || typeof this.device.native.platform !== 'string') {\n            this.logger.warn('Ionic Insights: Device information unavailable.');\n        }\n        else {\n            var device = this.device.native;\n            var platform = this.normalizeDevicePlatform(device.platform);\n            var platformVersion = this.normalizeVersion(device.version);\n            var cordovaVersion = this.normalizeVersion(device.cordova);\n            this.track(\"mobileapp.active.platform.\" + platform);\n            this.track(\"mobileapp.active.platform.\" + platform + \".\" + platformVersion);\n            this.track(\"mobileapp.active.cordova.\" + cordovaVersion);\n        }\n        this.storage.set('insights_session', new Date().toISOString());\n    };\n    /**\n     * @private\n     */\n    Insights.prototype.normalizeDevicePlatform = function (platform) {\n        return platform.toLowerCase().replace(/[^a-z0-9_]/g, '_');\n    };\n    /**\n     * @private\n     */\n    Insights.prototype.normalizeVersion = function (s) {\n        var v;\n        try {\n            v = String(parseSemanticVersion(s).major);\n        }\n        catch (e) {\n            v = 'unknown';\n        }\n        return v;\n    };\n    /**\n     * @private\n     */\n    Insights.prototype.trackStat = function (stat) {\n        this.batch.push(stat);\n        if (this.shouldSubmit()) {\n            this.submit();\n        }\n    };\n    /**\n     * @private\n     */\n    Insights.prototype.shouldSubmit = function () {\n        return this.batch.length >= this.options.submitCount;\n    };\n    /**\n     * Manually submit the insights that have been tracked and stored in the\n     * submission queue.\n     *\n     * Unless configured differently, insights are automatically sent to Ionic\n     * every minute, by default. It may be prudent, however, to call this when\n     * you know your app is about to be put to sleep.\n     */\n    Insights.prototype.submit = function () {\n        var _this = this;\n        if (this.batch.length === 0) {\n            return;\n        }\n        var insights = [];\n        for (var _i = 0, _a = this.batch; _i < _a.length; _i++) {\n            var stat = _a[_i];\n            insights.push(stat.toJSON());\n        }\n        this.client.post('/insights')\n            .send({ 'insights': insights })\n            .end(function (err, res) {\n            if (err) {\n                _this.logger.error('Ionic Insights: Could not send insights.', err);\n            }\n        });\n        this.batch = [];\n    };\n    return Insights;\n}());\nexport { Insights };\n","/**\n * Simple console logger.\n */\nvar Logger = (function () {\n    function Logger(options) {\n        if (options === void 0) { options = {}; }\n        this.options = options;\n        /**\n         * The function to use to log info level messages.\n         */\n        this.infofn = console.log.bind(console);\n        /**\n         * The function to use to log warn level messages.\n         */\n        this.warnfn = console.warn.bind(console);\n        /**\n         * The function to use to log error level messages.\n         */\n        this.errorfn = console.error.bind(console);\n    }\n    /**\n     * Send a log at info level.\n     *\n     * @note TODO: Fix optionalParams in docs.\n     *\n     * @param message - The message to log.\n     */\n    Logger.prototype.info = function (message) {\n        var optionalParams = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            optionalParams[_i - 1] = arguments[_i];\n        }\n        if (!this.options.silent) {\n            this.infofn.apply(this, [message].concat(optionalParams));\n        }\n    };\n    /**\n     * Send a log at warn level.\n     *\n     * @note TODO: Fix optionalParams in docs.\n     *\n     * @param message - The message to log.\n     */\n    Logger.prototype.warn = function (message) {\n        var optionalParams = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            optionalParams[_i - 1] = arguments[_i];\n        }\n        if (!this.options.silent) {\n            this.warnfn.apply(this, [message].concat(optionalParams));\n        }\n    };\n    /**\n     * Send a log at error level.\n     *\n     * @note TODO: Fix optionalParams in docs.\n     *\n     * @param message - The message to log.\n     */\n    Logger.prototype.error = function (message) {\n        var optionalParams = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            optionalParams[_i - 1] = arguments[_i];\n        }\n        this.errorfn.apply(this, [message].concat(optionalParams));\n    };\n    return Logger;\n}());\nexport { Logger };\n","/**\n * Represents a push notification sent to the device.\n *\n * @featured\n */\nvar PushMessage = (function () {\n    function PushMessage() {\n    }\n    /**\n     * Create a PushMessage from the push plugin's format.\n     *\n     * @hidden\n     *\n     * @param data - The plugin's notification object.\n     */\n    PushMessage.fromPluginData = function (data) {\n        var message = new PushMessage();\n        message.raw = data;\n        message.text = data.message;\n        message.title = data.title;\n        message.count = data.count;\n        message.sound = data.sound;\n        message.image = data.image;\n        message.app = {\n            'asleep': !data.additionalData.foreground,\n            'closed': data.additionalData.coldstart\n        };\n        message.payload = data.additionalData['payload'];\n        return message;\n    };\n    PushMessage.prototype.toString = function () {\n        return \"<PushMessage [\\\"\" + this.title + \"\\\"]>\";\n    };\n    return PushMessage;\n}());\nexport { PushMessage };\n","import { DeferredPromise } from '../promise';\nimport { PushMessage } from './message';\n/**\n * `Push` handles push notifications for this app.\n *\n * @featured\n */\nvar Push = (function () {\n    function Push(deps, options) {\n        if (options === void 0) { options = {}; }\n        this.options = options;\n        /**\n         * @private\n         */\n        this.blockRegistration = false;\n        /**\n         * @private\n         */\n        this.blockUnregister = false;\n        /**\n         * @private\n         */\n        this.blockSaveToken = false;\n        /**\n         * @private\n         */\n        this.registered = false;\n        this.config = deps.config;\n        this.auth = deps.auth;\n        this.userService = deps.userService;\n        this.device = deps.device;\n        this.client = deps.client;\n        this.emitter = deps.emitter;\n        this.storage = deps.storage;\n        this.logger = deps.logger;\n        // Check for the required values to use this service\n        if (this.device.isAndroid() && !this.options.sender_id) {\n            this.logger.error('Ionic Push: GCM project number not found (https://docs.ionic.io/services/push/)');\n            return;\n        }\n        if (!options.pluginConfig) {\n            options.pluginConfig = {};\n        }\n        if (this.device.isAndroid()) {\n            // inject gcm key for PushPlugin\n            if (!options.pluginConfig.android) {\n                options.pluginConfig.android = {};\n            }\n            if (!options.pluginConfig.android.senderID) {\n                options.pluginConfig.android.senderID = this.options.sender_id;\n            }\n        }\n        this.options = options;\n    }\n    Object.defineProperty(Push.prototype, \"token\", {\n        get: function () {\n            if (!this._token) {\n                this._token = this.storage.get('push_token') || undefined;\n            }\n            return this._token;\n        },\n        set: function (val) {\n            if (!val) {\n                this.storage.delete('push_token');\n            }\n            else {\n                this.storage.set('push_token', val);\n            }\n            this._token = val;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Register a token with the API.\n     *\n     * When a token is saved, you can send push notifications to it. If a user is\n     * logged in, the token is linked to them by their ID.\n     *\n     * @param token - The token.\n     * @param options\n     */\n    Push.prototype.saveToken = function (token, options) {\n        var _this = this;\n        if (options === void 0) { options = {}; }\n        var deferred = new DeferredPromise();\n        var tokenData = {\n            'token': token.token,\n            'app_id': this.config.get('app_id')\n        };\n        if (!options.ignore_user) {\n            var user = this.userService.current();\n            if (this.auth.isAuthenticated()) {\n                tokenData.user_id = user.id;\n            }\n        }\n        if (this.blockSaveToken) {\n            return deferred.reject(new Error('A token save operation is already in progress.'));\n        }\n        this.client.post('/push/tokens')\n            .send(tokenData)\n            .end(function (err, res) {\n            if (err) {\n                _this.blockSaveToken = false;\n                _this.logger.error('Ionic Push:', err);\n                deferred.reject(err);\n            }\n            else {\n                _this.blockSaveToken = false;\n                _this.logger.info('Ionic Push: saved push token: ' + token.token);\n                if (tokenData.user_id) {\n                    _this.logger.info('Ionic Push: added push token to user: ' + tokenData.user_id);\n                }\n                token.id = res.body.data.id;\n                token.type = res.body.data.type;\n                token.saved = true;\n                deferred.resolve(token);\n            }\n        });\n        return deferred.promise;\n    };\n    /**\n     * Registers the device with GCM/APNS to get a push token.\n     *\n     * After a device is registered, you will likely want to save the token with\n     * [`saveToken()`](/api/client/push/#saveToken) to the API.\n     */\n    Push.prototype.register = function () {\n        var _this = this;\n        var deferred = new DeferredPromise();\n        if (this.blockRegistration) {\n            return deferred.reject(new Error('Another registration is already in progress.'));\n        }\n        this.blockRegistration = true;\n        this.emitter.once('device:ready', function () {\n            var pushPlugin = _this._getPushPlugin();\n            if (pushPlugin) {\n                _this.plugin = pushPlugin.init(_this.options.pluginConfig);\n                _this.plugin.on('registration', function (data) {\n                    _this.blockRegistration = false;\n                    _this.token = { 'token': data.registrationId, 'registered': false, 'saved': false };\n                    _this.token.registered = true;\n                    deferred.resolve(_this.token);\n                });\n                _this.plugin.on('error', function (err) {\n                    _this.logger.error('Ionic Push:', err);\n                    deferred.reject(err);\n                });\n                _this._callbackRegistration();\n                _this.registered = true;\n            }\n            else {\n                deferred.reject(new Error('Push plugin not found! See logs.'));\n            }\n        });\n        return deferred.promise;\n    };\n    /**\n     * Invalidate the current push token.\n     */\n    Push.prototype.unregister = function () {\n        var _this = this;\n        var deferred = new DeferredPromise();\n        if (this.blockUnregister) {\n            return deferred.reject(new Error('An unregister operation is already in progress.'));\n        }\n        var pushToken = this.token;\n        if (!pushToken) {\n            return deferred.resolve();\n        }\n        var tokenData = {\n            'token': pushToken.token,\n            'app_id': this.config.get('app_id')\n        };\n        if (this.plugin) {\n            this.plugin.unregister(function () { }, function () { });\n        }\n        this.client.post('/push/tokens/invalidate')\n            .send(tokenData)\n            .end(function (err, res) {\n            _this.blockUnregister = false;\n            if (err) {\n                _this.logger.error('Ionic Push:', err);\n                deferred.reject(err);\n            }\n            else {\n                _this.logger.info('Ionic Push: unregistered push token');\n                delete _this.token;\n                deferred.resolve();\n            }\n        });\n        this.blockUnregister = true;\n        return deferred.promise;\n    };\n    /**\n     * @private\n     */\n    Push.prototype._callbackRegistration = function () {\n        var _this = this;\n        this.plugin.on('registration', function (data) {\n            if (_this.options.debug) {\n                _this.logger.info('Ionic Push (debug): device token registered: ' + _this.token);\n            }\n            _this.emitter.emit('push:register', _this.token);\n        });\n        this.plugin.on('notification', function (data) {\n            var message = PushMessage.fromPluginData(data);\n            if (_this.options.debug) {\n                _this.logger.info('Ionic Push (debug): notification received: ' + message);\n            }\n            _this.emitter.emit('push:notification', { 'message': message, 'raw': data });\n        });\n        this.plugin.on('error', function (e) {\n            if (_this.options.debug) {\n                _this.logger.error('Ionic Push (debug): unexpected error occured.');\n                _this.logger.error('Ionic Push:', e);\n            }\n            _this.emitter.emit('push:error', { 'err': e });\n        });\n    };\n    /**\n     * @private\n     */\n    Push.prototype._getPushPlugin = function () {\n        var plugin = window.PushNotification;\n        if (!plugin) {\n            if (this.device.isIOS() || this.device.isAndroid()) {\n                this.logger.error('Ionic Push: PushNotification plugin is required. Have you run `ionic plugin add phonegap-plugin-push` ?');\n            }\n            else {\n                this.logger.warn('Ionic Push: Disabled! Native push notifications will not work in a browser. Run your app on an actual device to use push.');\n            }\n        }\n        return plugin;\n    };\n    return Push;\n}());\nexport { Push };\n","/**\n * @hidden\n */\nvar LocalStorageStrategy = (function () {\n    function LocalStorageStrategy() {\n    }\n    LocalStorageStrategy.prototype.get = function (key) {\n        return localStorage.getItem(key);\n    };\n    LocalStorageStrategy.prototype.set = function (key, value) {\n        return localStorage.setItem(key, value);\n    };\n    LocalStorageStrategy.prototype.delete = function (key) {\n        return localStorage.removeItem(key);\n    };\n    return LocalStorageStrategy;\n}());\nexport { LocalStorageStrategy };\n/**\n * @hidden\n */\nvar SessionStorageStrategy = (function () {\n    function SessionStorageStrategy() {\n    }\n    SessionStorageStrategy.prototype.get = function (key) {\n        return sessionStorage.getItem(key);\n    };\n    SessionStorageStrategy.prototype.set = function (key, value) {\n        return sessionStorage.setItem(key, value);\n    };\n    SessionStorageStrategy.prototype.delete = function (key) {\n        return sessionStorage.removeItem(key);\n    };\n    return SessionStorageStrategy;\n}());\nexport { SessionStorageStrategy };\n/**\n * A generic local/session storage abstraction.\n */\nvar Storage = (function () {\n    function Storage(deps, options) {\n        if (options === void 0) { options = { 'prefix': 'ionic', 'cache': true }; }\n        this.options = options;\n        this.strategy = deps.strategy;\n        this.storageCache = {};\n    }\n    /**\n     * Set a value in the storage by the given key.\n     *\n     * @param key - The storage key to set.\n     * @param value - The value to set. (Must be JSON-serializable).\n     */\n    Storage.prototype.set = function (key, value) {\n        key = this.standardizeKey(key);\n        var json = JSON.stringify(value);\n        this.strategy.set(key, json);\n        if (this.options.cache) {\n            this.storageCache[key] = value;\n        }\n    };\n    /**\n     * Delete a value from the storage by the given key.\n     *\n     * @param key - The storage key to delete.\n     */\n    Storage.prototype.delete = function (key) {\n        key = this.standardizeKey(key);\n        this.strategy.delete(key);\n        if (this.options.cache) {\n            delete this.storageCache[key];\n        }\n    };\n    /**\n     * Get a value from the storage by the given key.\n     *\n     * @param key - The storage key to get.\n     */\n    Storage.prototype.get = function (key) {\n        key = this.standardizeKey(key);\n        if (this.options.cache) {\n            var cached = this.storageCache[key];\n            if (cached) {\n                return cached;\n            }\n        }\n        var json = this.strategy.get(key);\n        if (!json) {\n            return null;\n        }\n        try {\n            var value = JSON.parse(json);\n            if (this.options.cache) {\n                this.storageCache[key] = value;\n            }\n            return value;\n        }\n        catch (err) {\n            return null;\n        }\n    };\n    /**\n     * @private\n     */\n    Storage.prototype.standardizeKey = function (key) {\n        return this.options.prefix + \"_\" + key;\n    };\n    return Storage;\n}());\nexport { Storage };\n","var dataTypeMapping = {};\nvar DataTypeSchema = (function () {\n    function DataTypeSchema(properties) {\n        this.data = {};\n        this.setProperties(properties);\n    }\n    DataTypeSchema.prototype.setProperties = function (properties) {\n        if (properties instanceof Object) {\n            for (var x in properties) {\n                this.data[x] = properties[x];\n            }\n        }\n    };\n    DataTypeSchema.prototype.toJSON = function () {\n        var data = this.data;\n        return {\n            '__Ionic_DataTypeSchema': data.name,\n            'value': data.value\n        };\n    };\n    DataTypeSchema.prototype.isValid = function () {\n        if (this.data.name && this.data.value) {\n            return true;\n        }\n        return false;\n    };\n    return DataTypeSchema;\n}());\nexport { DataTypeSchema };\nvar DataType = (function () {\n    function DataType() {\n    }\n    DataType.get = function (name, value) {\n        if (dataTypeMapping[name]) {\n            return new dataTypeMapping[name](value);\n        }\n        return false;\n    };\n    DataType.getMapping = function () {\n        return dataTypeMapping;\n    };\n    Object.defineProperty(DataType, \"Schema\", {\n        get: function () {\n            return DataTypeSchema;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    DataType.register = function (name, cls) {\n        dataTypeMapping[name] = cls;\n    };\n    return DataType;\n}());\nexport { DataType };\nvar UniqueArray = (function () {\n    function UniqueArray(value) {\n        this.data = [];\n        if (value instanceof Array) {\n            for (var x in value) {\n                this.push(value[x]);\n            }\n        }\n    }\n    UniqueArray.prototype.toJSON = function () {\n        var data = this.data;\n        var schema = new DataTypeSchema({ 'name': 'UniqueArray', 'value': data });\n        return schema.toJSON();\n    };\n    UniqueArray.fromStorage = function (value) {\n        return new UniqueArray(value);\n    };\n    UniqueArray.prototype.push = function (value) {\n        if (this.data.indexOf(value) === -1) {\n            this.data.push(value);\n        }\n    };\n    UniqueArray.prototype.pull = function (value) {\n        var index = this.data.indexOf(value);\n        this.data.splice(index, 1);\n    };\n    return UniqueArray;\n}());\nexport { UniqueArray };\nDataType.register('UniqueArray', UniqueArray);\n","import { DeferredPromise } from '../promise';\nimport { DataType } from './data-types';\n/**\n * @hidden\n */\nvar UserContext = (function () {\n    function UserContext(deps) {\n        this.config = deps.config;\n        this.storage = deps.storage;\n    }\n    Object.defineProperty(UserContext.prototype, \"label\", {\n        get: function () {\n            return 'user_' + this.config.get('app_id');\n        },\n        enumerable: true,\n        configurable: true\n    });\n    UserContext.prototype.unstore = function () {\n        this.storage.delete(this.label);\n    };\n    UserContext.prototype.store = function (user) {\n        this.storage.set(this.label, user.serializeForStorage());\n    };\n    UserContext.prototype.load = function (user) {\n        var data = this.storage.get(this.label);\n        if (data) {\n            user.id = data.id;\n            user.data = new UserData(data.data);\n            user.details = data.details || {};\n            user.social = data.social || {};\n            user.fresh = data.fresh;\n            return user;\n        }\n        return null;\n    };\n    return UserContext;\n}());\nexport { UserContext };\n/**\n * @hidden\n */\nvar UserData = (function () {\n    function UserData(data) {\n        if (data === void 0) { data = {}; }\n        this.data = {};\n        if ((typeof data === 'object')) {\n            this.data = data;\n            this.deserializeDataTypes();\n        }\n    }\n    UserData.prototype.get = function (key, defaultValue) {\n        if (this.data.hasOwnProperty(key)) {\n            return this.data[key];\n        }\n        else {\n            if (defaultValue === 0 || defaultValue === false) {\n                return defaultValue;\n            }\n            return defaultValue || null;\n        }\n    };\n    UserData.prototype.set = function (key, value) {\n        this.data[key] = value;\n    };\n    UserData.prototype.unset = function (key) {\n        delete this.data[key];\n    };\n    /**\n     * @private\n     */\n    UserData.prototype.deserializeDataTypes = function () {\n        if (this.data) {\n            for (var x in this.data) {\n                // if we have an object, let's check for custom data types\n                if (this.data[x] && typeof this.data[x] === 'object') {\n                    // do we have a custom type?\n                    if (this.data[x].__Ionic_DataTypeSchema) {\n                        var name = this.data[x].__Ionic_DataTypeSchema;\n                        var mapping = DataType.getMapping();\n                        if (mapping[name]) {\n                            // we have a custom type and a registered class, give the custom data type\n                            // from storage\n                            this.data[x] = mapping[name].fromStorage(this.data[x].value);\n                        }\n                    }\n                }\n            }\n        }\n    };\n    return UserData;\n}());\nexport { UserData };\n/**\n * Represents a user of the app.\n *\n * @featured\n */\nvar User = (function () {\n    function User(deps) {\n        /**\n         * The details (email, password, etc) of this user.\n         */\n        this.details = {};\n        /**\n         * The social details of this user.\n         */\n        this.social = {};\n        this.service = deps.service;\n        this.fresh = true;\n        this._unset = {};\n        this.data = new UserData();\n    }\n    /**\n     * Check whether this user is anonymous or not.\n     *\n     * If the `id` property is set, the user is no longer anonymous.\n     */\n    User.prototype.isAnonymous = function () {\n        if (!this.id) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    /**\n     * Get a value from this user's custom data.\n     *\n     * Optionally, a default value can be provided.\n     *\n     * @param key - The data key to get.\n     * @param defaultValue - The value to return if the key is absent.\n     */\n    User.prototype.get = function (key, defaultValue) {\n        return this.data.get(key, defaultValue);\n    };\n    /**\n     * Set a value in this user's custom data.\n     *\n     * @param key - The data key to set.\n     * @param value - The value to set.\n     */\n    User.prototype.set = function (key, value) {\n        delete this._unset[key];\n        return this.data.set(key, value);\n    };\n    /**\n     * Delete a value from this user's custom data.\n     *\n     * @param key - The data key to delete.\n     */\n    User.prototype.unset = function (key) {\n        this._unset[key] = true;\n        return this.data.unset(key);\n    };\n    /**\n     * Revert this user to a fresh, anonymous state.\n     */\n    User.prototype.clear = function () {\n        this.id = undefined;\n        this.data = new UserData();\n        this.details = {};\n        this.fresh = true;\n    };\n    /**\n     * Save this user to the API.\n     */\n    User.prototype.save = function () {\n        this._unset = {};\n        return this.service.save();\n    };\n    /**\n     * Delete this user from the API.\n     */\n    User.prototype.delete = function () {\n        return this.service.delete();\n    };\n    /**\n     * Load the user from the API, overwriting the local user's data.\n     *\n     * @param id - The user ID to load into this user.\n     */\n    User.prototype.load = function (id) {\n        return this.service.load(id);\n    };\n    /**\n     * Store this user in local storage.\n     */\n    User.prototype.store = function () {\n        this.service.store();\n    };\n    /**\n     * Remove this user from local storage.\n     */\n    User.prototype.unstore = function () {\n        this.service.unstore();\n    };\n    /**\n     * @hidden\n     */\n    User.prototype.serializeForAPI = function () {\n        return {\n            'email': this.details.email,\n            'password': this.details.password,\n            'username': this.details.username,\n            'image': this.details.image,\n            'name': this.details.name,\n            'custom': this.data.data\n        };\n    };\n    /**\n     * @hidden\n     */\n    User.prototype.serializeForStorage = function () {\n        return {\n            'id': this.id,\n            'data': this.data.data,\n            'details': this.details,\n            'fresh': this.fresh,\n            'social': this.social\n        };\n    };\n    User.prototype.toString = function () {\n        return \"<User [\" + (this.isAnonymous() ? 'anonymous' : this.id) + \"]>\";\n    };\n    return User;\n}());\nexport { User };\n/**\n * @hidden\n */\nvar SingleUserService = (function () {\n    function SingleUserService(deps, config) {\n        if (config === void 0) { config = {}; }\n        this.config = config;\n        this.client = deps.client;\n        this.context = deps.context;\n    }\n    SingleUserService.prototype.current = function () {\n        if (!this.user) {\n            this.user = this.context.load(new User({ 'service': this }));\n        }\n        if (!this.user) {\n            this.user = new User({ 'service': this });\n        }\n        return this.user;\n    };\n    SingleUserService.prototype.store = function () {\n        this.context.store(this.current());\n    };\n    SingleUserService.prototype.unstore = function () {\n        this.context.unstore();\n    };\n    SingleUserService.prototype.load = function (id) {\n        if (id === void 0) { id = 'self'; }\n        var deferred = new DeferredPromise();\n        var user = this.current();\n        this.client.get(\"/auth/users/\" + id)\n            .end(function (err, res) {\n            if (err) {\n                deferred.reject(err);\n            }\n            else {\n                user.id = res.body.data.uuid;\n                user.data = new UserData(res.body.data.custom);\n                user.details = res.body.data.details;\n                user.fresh = false;\n                user.social = res.body.data.social;\n                deferred.resolve();\n            }\n        });\n        return deferred.promise;\n    };\n    SingleUserService.prototype.delete = function () {\n        var deferred = new DeferredPromise();\n        if (!this.user) {\n            return deferred.reject(new Error('No user loaded to delete.'));\n        }\n        if (this.user.isAnonymous()) {\n            return deferred.reject(new Error('User is anonymous and cannot be deleted from the API.'));\n        }\n        this.unstore();\n        this.client.delete(\"/auth/users/\" + this.user.id)\n            .end(function (err, res) {\n            if (err) {\n                deferred.reject(err);\n            }\n            else {\n                deferred.resolve();\n            }\n        });\n        return deferred.promise;\n    };\n    SingleUserService.prototype.save = function () {\n        var _this = this;\n        var deferred = new DeferredPromise();\n        this.store();\n        if (!this.user) {\n            return deferred.reject(new Error('No user loaded to save.'));\n        }\n        if (this.user.isAnonymous()) {\n            return deferred.reject(new Error('User is anonymous and cannot be updated in the API. Use load(<id>) or signup a user using auth.'));\n        }\n        this.client.patch(\"/auth/users/\" + this.user.id)\n            .send(this.user.serializeForAPI())\n            .end(function (err, res) {\n            if (err) {\n                deferred.reject(err);\n            }\n            else {\n                if (_this.user) {\n                    _this.user.fresh = false;\n                }\n                deferred.resolve();\n            }\n        });\n        return deferred.promise;\n    };\n    return SingleUserService;\n}());\nexport { SingleUserService };\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nimport { Auth, BasicAuthType, CombinedAuthTokenContext, CustomAuthType, FacebookAuth, FacebookAuthType, GithubAuthType, GoogleAuth, GoogleAuthType, InstagramAuthType, LinkedInAuthType, TwitterAuthType, } from './auth';\nimport { Client } from './client';\nimport { Config } from './config';\nimport { Cordova } from './cordova';\nimport { Core } from './core';\nimport { Deploy } from './deploy/deploy';\nimport { Device } from './device';\nimport { EventEmitter } from './events';\nimport { Insights } from './insights';\nimport { Logger } from './logger';\nimport { Push } from './push/push';\nimport { Storage, LocalStorageStrategy, SessionStorageStrategy } from './storage';\nimport { UserContext, SingleUserService } from './user/user';\nvar modules = {};\nfunction cache(target, propertyKey, descriptor) {\n    var method = descriptor.get;\n    descriptor.get = function () {\n        if (typeof method !== 'undefined' && typeof modules[propertyKey] === 'undefined') {\n            var value = method.apply(this, arguments);\n            modules[propertyKey] = value;\n        }\n        return modules[propertyKey];\n    };\n    descriptor.set = function (value) { };\n}\n/**\n * @hidden\n */\nvar Container = (function () {\n    function Container() {\n    }\n    Object.defineProperty(Container.prototype, \"appStatus\", {\n        get: function () {\n            return { 'asleep': false, 'closed': false };\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Container.prototype, \"config\", {\n        get: function () {\n            return new Config();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Container.prototype, \"eventEmitter\", {\n        get: function () {\n            return new EventEmitter();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Container.prototype, \"logger\", {\n        get: function () {\n            var config = this.config;\n            var c = {};\n            if (typeof config.settings !== 'undefined' && typeof config.settings.logger !== 'undefined') {\n                c = config.settings.logger;\n            }\n            return new Logger(c);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Container.prototype, \"localStorageStrategy\", {\n        get: function () {\n            return new LocalStorageStrategy();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Container.prototype, \"sessionStorageStrategy\", {\n        get: function () {\n            return new SessionStorageStrategy();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Container.prototype, \"authTokenContext\", {\n        get: function () {\n            var label = 'auth_' + this.config.get('app_id');\n            return new CombinedAuthTokenContext({\n                'storage': new Storage({ 'strategy': this.localStorageStrategy }),\n                'tempStorage': new Storage({ 'strategy': this.sessionStorageStrategy })\n            }, label);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Container.prototype, \"client\", {\n        get: function () {\n            return new Client(this.authTokenContext, this.config.getURL('api'));\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Container.prototype, \"insights\", {\n        get: function () {\n            var config = this.config;\n            var c = {};\n            if (typeof config.settings !== 'undefined' && typeof config.settings.insights !== 'undefined') {\n                c = config.settings.insights;\n            }\n            return new Insights({\n                'appStatus': this.appStatus,\n                'storage': new Storage({ 'strategy': this.localStorageStrategy }),\n                'config': this.config,\n                'client': this.client,\n                'device': this.device,\n                'logger': this.logger\n            }, c);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Container.prototype, \"core\", {\n        get: function () {\n            return new Core({\n                'config': this.config,\n                'logger': this.logger,\n                'emitter': this.eventEmitter,\n                'insights': this.insights\n            });\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Container.prototype, \"device\", {\n        get: function () {\n            var cordovaDevice = window.device;\n            return new Device({ 'nativeDevice': cordovaDevice, 'emitter': this.eventEmitter });\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Container.prototype, \"cordova\", {\n        get: function () {\n            return new Cordova({\n                'appStatus': this.appStatus,\n                'device': this.device,\n                'emitter': this.eventEmitter,\n                'logger': this.logger\n            });\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Container.prototype, \"userContext\", {\n        get: function () {\n            return new UserContext({ 'storage': new Storage({ 'strategy': this.localStorageStrategy }), 'config': this.config });\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Container.prototype, \"singleUserService\", {\n        get: function () {\n            return new SingleUserService({ 'client': this.client, 'context': this.userContext });\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Container.prototype, \"authModules\", {\n        get: function () {\n            var authModuleDeps = {\n                'config': this.config,\n                'client': this.client,\n                'emitter': this.eventEmitter\n            };\n            return {\n                'basic': new BasicAuthType(authModuleDeps),\n                'custom': new CustomAuthType(authModuleDeps),\n                'twitter': new TwitterAuthType(authModuleDeps),\n                'facebook': new FacebookAuthType(authModuleDeps),\n                'github': new GithubAuthType(authModuleDeps),\n                'google': new GoogleAuthType(authModuleDeps),\n                'instagram': new InstagramAuthType(authModuleDeps),\n                'linkedin': new LinkedInAuthType(authModuleDeps)\n            };\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Container.prototype, \"auth\", {\n        get: function () {\n            return new Auth({\n                'config': this.config,\n                'emitter': this.eventEmitter,\n                'authModules': this.authModules,\n                'tokenContext': this.authTokenContext,\n                'userService': this.singleUserService,\n                'storage': new Storage({ 'strategy': this.localStorageStrategy })\n            });\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Container.prototype, \"facebookAuth\", {\n        get: function () {\n            return new FacebookAuth({\n                'config': this.config,\n                'client': this.client,\n                'userService': this.singleUserService,\n                'storage': new Storage({ 'strategy': this.localStorageStrategy }),\n                'tokenContext': this.authTokenContext,\n                'emitter': this.eventEmitter\n            });\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Container.prototype, \"googleAuth\", {\n        get: function () {\n            return new GoogleAuth({\n                'config': this.config,\n                'client': this.client,\n                'userService': this.singleUserService,\n                'storage': new Storage({ 'strategy': this.localStorageStrategy }),\n                'tokenContext': this.authTokenContext,\n                'emitter': this.eventEmitter\n            });\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Container.prototype, \"push\", {\n        get: function () {\n            var config = this.config;\n            var c = {};\n            if (typeof config.settings !== 'undefined' && typeof config.settings.push !== 'undefined') {\n                c = config.settings.push;\n            }\n            return new Push({\n                'config': config,\n                'auth': this.auth,\n                'userService': this.singleUserService,\n                'device': this.device,\n                'client': this.client,\n                'emitter': this.eventEmitter,\n                'storage': new Storage({ 'strategy': this.localStorageStrategy }),\n                'logger': this.logger\n            }, c);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Container.prototype, \"deploy\", {\n        get: function () {\n            return new Deploy({\n                'config': this.config,\n                'emitter': this.eventEmitter,\n                'logger': this.logger\n            });\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return Container;\n}());\nexport { Container };\n__decorate([\n    cache,\n    __metadata(\"design:type\", Object),\n    __metadata(\"design:paramtypes\", [])\n], Container.prototype, \"appStatus\", null);\n__decorate([\n    cache,\n    __metadata(\"design:type\", Object),\n    __metadata(\"design:paramtypes\", [])\n], Container.prototype, \"config\", null);\n__decorate([\n    cache,\n    __metadata(\"design:type\", Object),\n    __metadata(\"design:paramtypes\", [])\n], Container.prototype, \"eventEmitter\", null);\n__decorate([\n    cache,\n    __metadata(\"design:type\", Object),\n    __metadata(\"design:paramtypes\", [])\n], Container.prototype, \"logger\", null);\n__decorate([\n    cache,\n    __metadata(\"design:type\", Object),\n    __metadata(\"design:paramtypes\", [])\n], Container.prototype, \"localStorageStrategy\", null);\n__decorate([\n    cache,\n    __metadata(\"design:type\", Object),\n    __metadata(\"design:paramtypes\", [])\n], Container.prototype, \"sessionStorageStrategy\", null);\n__decorate([\n    cache,\n    __metadata(\"design:type\", Object),\n    __metadata(\"design:paramtypes\", [])\n], Container.prototype, \"authTokenContext\", null);\n__decorate([\n    cache,\n    __metadata(\"design:type\", Object),\n    __metadata(\"design:paramtypes\", [])\n], Container.prototype, \"client\", null);\n__decorate([\n    cache,\n    __metadata(\"design:type\", Object),\n    __metadata(\"design:paramtypes\", [])\n], Container.prototype, \"insights\", null);\n__decorate([\n    cache,\n    __metadata(\"design:type\", Object),\n    __metadata(\"design:paramtypes\", [])\n], Container.prototype, \"core\", null);\n__decorate([\n    cache,\n    __metadata(\"design:type\", Object),\n    __metadata(\"design:paramtypes\", [])\n], Container.prototype, \"device\", null);\n__decorate([\n    cache,\n    __metadata(\"design:type\", Object),\n    __metadata(\"design:paramtypes\", [])\n], Container.prototype, \"cordova\", null);\n__decorate([\n    cache,\n    __metadata(\"design:type\", Object),\n    __metadata(\"design:paramtypes\", [])\n], Container.prototype, \"userContext\", null);\n__decorate([\n    cache,\n    __metadata(\"design:type\", Object),\n    __metadata(\"design:paramtypes\", [])\n], Container.prototype, \"singleUserService\", null);\n__decorate([\n    cache,\n    __metadata(\"design:type\", Object),\n    __metadata(\"design:paramtypes\", [])\n], Container.prototype, \"authModules\", null);\n__decorate([\n    cache,\n    __metadata(\"design:type\", Object),\n    __metadata(\"design:paramtypes\", [])\n], Container.prototype, \"auth\", null);\n__decorate([\n    cache,\n    __metadata(\"design:type\", Object),\n    __metadata(\"design:paramtypes\", [])\n], Container.prototype, \"facebookAuth\", null);\n__decorate([\n    cache,\n    __metadata(\"design:type\", Object),\n    __metadata(\"design:paramtypes\", [])\n], Container.prototype, \"googleAuth\", null);\n__decorate([\n    cache,\n    __metadata(\"design:type\", Object),\n    __metadata(\"design:paramtypes\", [])\n], Container.prototype, \"push\", null);\n__decorate([\n    cache,\n    __metadata(\"design:type\", Object),\n    __metadata(\"design:paramtypes\", [])\n], Container.prototype, \"deploy\", null);\n","import { Container as DIContainer } from './di';\nimport { EventEmitter } from './events';\nimport { DeferredPromise } from './promise';\n/**\n * Angular 1 modules and factories for the bundle\n */\nexport function bootstrapAngular1() {\n    if (typeof angular === 'undefined') {\n        return; // No global angular--this is not an AngularJS project.\n    }\n    var container = new DIContainer();\n    angular.element(document).ready(function () {\n        container.core.init();\n        container.cordova.bootstrap();\n    });\n    angular.module('ionic.cloud', [])\n        .provider('$ionicCloudConfig', function () {\n        var config = container.config;\n        this.register = function (settings) {\n            config.register(settings);\n        };\n        this.$get = function () {\n            return config;\n        };\n    })\n        .provider('$ionicCloud', ['$ionicCloudConfigProvider', function ($ionicCloudConfigProvider) {\n            this.init = function (value) {\n                $ionicCloudConfigProvider.register(value);\n            };\n            this.$get = [function () {\n                    return container.core;\n                }];\n        }])\n        .factory('$ionicCloudClient', [function () {\n            return container.client;\n        }])\n        .factory('$ionicUser', [function () {\n            return container.singleUserService.current();\n        }])\n        .factory('$ionicAuth', [function () {\n            return container.auth;\n        }])\n        .factory('$ionicFacebookAuth', [function () {\n            return container.facebookAuth;\n        }])\n        .factory('$ionicGoogleAuth', [function () {\n            return container.googleAuth;\n        }])\n        .factory('$ionicPush', [function () {\n            return container.push;\n        }])\n        .factory('$ionicDeploy', [function () {\n            return container.deploy;\n        }])\n        .run(['$window', '$q', '$rootScope', function ($window, $q, $rootScope) {\n            if (typeof $window.Promise === 'undefined') {\n                $window.Promise = $q;\n            }\n            else {\n                var init = DeferredPromise.prototype.init;\n                DeferredPromise.prototype.init = function () {\n                    init.apply(this, arguments);\n                    this.promise = $q.when(this.promise);\n                };\n            }\n            var emit = EventEmitter.prototype.emit;\n            EventEmitter.prototype.emit = function (name, data) {\n                $rootScope.$broadcast('cloud:' + name, data);\n                return emit.apply(this, arguments);\n            };\n        }]);\n}\n","export { Auth, AuthType, BasicAuthType, CustomAuthType, FacebookAuth, FacebookAuthType, GithubAuthType, GoogleAuth, GoogleAuthType, InstagramAuthType, LinkedInAuthType, TwitterAuthType } from './auth';\nexport { Client } from './client';\nexport { Config } from './config';\nexport { Cordova } from './cordova';\nexport { Core } from './core';\nexport { Deploy } from './deploy/deploy';\nexport { Device } from './device';\nexport { Exception, DetailedError } from './errors';\nexport { Container as DIContainer } from './di';\nexport { EventEmitter } from './events';\nexport { Insights } from './insights';\nexport { Logger } from './logger';\nexport { Push } from './push/push';\nexport { PushMessage } from './push/message';\nexport { Storage, LocalStorageStrategy, SessionStorageStrategy } from './storage';\nexport { UserContext, User, SingleUserService } from './user/user';\nimport { bootstrapAngular1 } from './angular';\nbootstrapAngular1();\n"],"names":["isAPIResponseError","x","meta","status","__extends","this","extendStatics","Object","setPrototypeOf","__proto__","Array","d","b","p","hasOwnProperty","__","constructor","prototype","create","Exception","_super","message","_this","call","name","stack","Error","toString","DetailedError","details","DeferredPromise","init","promise","Promise","resolve","reject","v","e","rejectImmediately","err","EMAIL_REGEX","SEMVER_REGEX","isValidEmail","email","test","parseSemanticVersion","s","r","trim","match","Number","minor","patch","CombinedAuthTokenContext","deps","label","storage","tempStorage","get","permToken","tempToken","token","store","options","permanent","set","delete","Auth","config","emitter","authModules","tokenContext","userService","defineProperty","getURL","isAuthenticated","emit","signup","basic","login","moduleId","credentials","remember","inAppBrowserOptions","location","clearcache","clearsessioncache","context","authenticate","then","storeToken","load","user","current","logout","undefined","unstore","clear","requestPasswordReset","confirmPasswordReset","code","newPassword","getToken","originalToken","authToken","getDetailedErrorFromResponse","res","errors","body","error","i","length","detail","error_type","push","parameter","AuthType","client","parseInAppBrowserOptions","opts","k","join","inAppBrowserFlow","data","deferred","window","cordova","once","InAppBrowser","post","send","href","end","w_1","open","url","onExit_1","onLoadError_1","onLoadStart","slice","queryString","split","paramParts","params","part","removeEventListener","close","decodeURIComponent","Boolean","parseInt","addEventListener","BasicAuthType","apply","arguments","password","userData","username","image","custom","response","NativeAuth","GoogleAuth","plugins","googleplus","authConfig","settings","auth","scope","google","webClientId","forEach","item","indexOf","success","serverAuthCode","request_object","FacebookAuth","facebookConnectPlugin","facebook","splice","authResponse","accessToken","CustomAuthType","TwitterAuthType","FacebookAuthType","GithubAuthType","GoogleAuthType","InstagramAuthType","LinkedInAuthType","isObject","require$$0","mixin","require$$4","require$$3","require$$2","require$$1","shouldRetry","index","Client","req","baseUrl","request","endpoint","supplement","put","method","bind","fn","substring","Config","urls","register","core","Cordova","app","appStatus","device","logger","registerEventHandlers","bootstrap","events","args","_i","_loop_1","_a","events_1","on","closed","Core","_version","insights","onResume","enabled","track","asleep","NO_PLUGIN","Deploy","channel","_getPlugin","plugin","check","result","info","download","onProgress","extract","redirect","getSnapshots","getVersions","deleteSnapshot","uuid","deleteVersion","getMetadata","metadata","IonicDeploy","warn","Device","native","nativeDevice","type","determineDeviceType","isAndroid","isIOS","isConnectedToNetwork","navigator","connection","Connection","strictMode","ETHERNET","WIFI","CELL_2G","CELL_3G","CELL_4G","CELL","agent","userAgent","ipad","toLowerCase","iphone","android","EventReceiver","key","event","handler","EventEmitter","n","eventReceivers","eventsEmitted","callback","receiver","off","emitted","Stat","appId","stat","value","created","Date","toJSON","toISOString","Insights","batch","intervalSubmit","intervalActiveCheck","submitCount","submit","checkActivity","trackStat","session","markActive","hour","getTime","platform","normalizeDevicePlatform","platformVersion","normalizeVersion","version","cordovaVersion","replace","String","major","shouldSubmit","Logger","infofn","console","log","warnfn","errorfn","optionalParams","silent","concat","PushMessage","fromPluginData","raw","text","title","count","sound","additionalData","foreground","coldstart","payload","Push","blockRegistration","blockUnregister","blockSaveToken","registered","sender_id","pluginConfig","senderID","_token","val","saveToken","tokenData","ignore_user","user_id","id","saved","pushPlugin","_getPushPlugin","registrationId","_callbackRegistration","unregister","pushToken","debug","PushNotification","LocalStorageStrategy","localStorage","getItem","setItem","removeItem","SessionStorageStrategy","sessionStorage","Storage","strategy","storageCache","standardizeKey","json","JSON","stringify","cache","cached","parse","prefix","dataTypeMapping","DataTypeSchema","properties","setProperties","isValid","DataType","getMapping","cls","UniqueArray","schema","fromStorage","pull","UserContext","serializeForStorage","UserData","social","fresh","deserializeDataTypes","defaultValue","unset","babelHelpers.typeof","__Ionic_DataTypeSchema","mapping","User","service","_unset","isAnonymous","save","serializeForAPI","SingleUserService","__decorate","decorators","target","desc","c","getOwnPropertyDescriptor","Reflect","decorate","__metadata","modules","propertyKey","descriptor","Container","localStorageStrategy","sessionStorageStrategy","authTokenContext","eventEmitter","cordovaDevice","userContext","authModuleDeps","singleUserService","bootstrapAngular1","angular","container","DIContainer","element","document","ready","module","provider","$get","$ionicCloudConfigProvider","factory","facebookAuth","googleAuth","deploy","run","$window","$q","$rootScope","when","$broadcast"],"mappings":"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"}