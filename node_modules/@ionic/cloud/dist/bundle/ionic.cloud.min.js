!function(t){"use strict";function e(t){return t.meta.status>=400}function i(t){return g.test(t)}function n(t){var e=t.trim().match(y);if(!e)throw new Error("Invalid semantic version.");var i={major:Number(e[1])};return e[2]&&(i.minor=Number(e[2])),e[3]&&(i.patch=Number(e[3])),i}function o(t,e){return e={exports:{}},t(e,e.exports),e.exports}function r(t){return null!==t&&"object"==typeof t}function s(t){if(t)return a(t)}function a(t){for(var e in s.prototype)t[e]=s.prototype[e];return t}function u(t){if(t)return c(t)}function c(t){for(var e in u.prototype)t[e]=u.prototype[e];return t}function p(t,e,i){var n=i.get;i.get=function(){if(void 0!==n&&void 0===jt[e]){var t=n.apply(this,arguments);jt[e]=t}return jt[e]},i.set=function(t){}}var h=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),l=function(t){function e(e){var i=t.call(this,e)||this;return i.message=e,i.name="Exception",i.stack=(new Error).stack,i}return h(e,t),e.prototype.toString=function(){return this.name+": "+this.message},e}(Error),d=function(t){function e(e,i){var n=t.call(this,e)||this;return n.message=e,n.details=i,n.name="DetailedError",n}return h(e,t),e}(l),f=function(){function t(){this.init()}return t.prototype.init=function(){var t=this;this.promise=new Promise(function(e,i){t.resolve=function(i){return e(i),t.promise},t.reject=function(e){return i(e),t.promise}})},t.rejectImmediately=function(t){return new Promise(function(e,i){i(t)})},t}(),g=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,y=/^v?([0-9]+)\.?([0-9]+)?\.?([0-9]+)?\.?.*$/,v=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),m=function(){function t(t,e){this.label=e,this.storage=t.storage,this.tempStorage=t.tempStorage}return t.prototype.get=function(){var t=this.storage.get(this.label);return this.tempStorage.get(this.label)||t},t.prototype.store=function(t,e){void 0===e&&(e={permanent:!0}),e.permanent?this.storage.set(this.label,t):this.tempStorage.set(this.label,t)},t.prototype.delete=function(){this.storage.delete(this.label),this.tempStorage.delete(this.label)},t}(),w=function(){function t(t){this.config=t.config,this.emitter=t.emitter,this.authModules=t.authModules,this.tokenContext=t.tokenContext,this.userService=t.userService,this.storage=t.storage}return Object.defineProperty(t.prototype,"passwordResetUrl",{get:function(){return this.config.getURL("web")+"/password/reset/"+this.config.get("app_id")},enumerable:!0,configurable:!0}),t.prototype.isAuthenticated=function(){var t=this.tokenContext.get();return!!t&&(this.emitter.emit("auth:login",{token:t}),!0)},t.prototype.signup=function(t){return this.authModules.basic.signup(t)},t.prototype.login=function(t,e,i){var n=this;void 0===i&&(i={}),void 0===i.remember&&(i.remember=!0),void 0===i.inAppBrowserOptions&&(i.inAppBrowserOptions={}),void 0===i.inAppBrowserOptions.location&&(i.inAppBrowserOptions.location=!1),void 0===i.inAppBrowserOptions.clearcache&&(i.inAppBrowserOptions.clearcache=!0),void 0===i.inAppBrowserOptions.clearsessioncache&&(i.inAppBrowserOptions.clearsessioncache=!0);var o=this.authModules[t];if(!o)throw new Error("Authentication class is invalid or missing:"+o);return o.authenticate(e,i).then(function(t){return n.storeToken(i,t.token),n.userService.load().then(function(){return n.userService.current().store(),t})})},t.prototype.logout=function(){this.emitter.emit("auth:token-changed",{old:this.tokenContext.get(),new:void 0}),this.emitter.emit("auth:logout",{}),this.tokenContext.delete();var t=this.userService.current();t.unstore(),t.clear()},t.prototype.requestPasswordReset=function(t){return this.storage.set("auth_password_reset_email",t),this.authModules.basic.requestPasswordReset(t)},t.prototype.confirmPasswordReset=function(t,e){var i=this.storage.get("auth_password_reset_email");return i?this.authModules.basic.confirmPasswordReset(i,t,e):f.rejectImmediately(new Error("email address not found in local storage"))},t.prototype.getToken=function(){return this.tokenContext.get()},t.prototype.storeToken=function(t,e){void 0===t&&(t={remember:!0});var i=this.authToken;this.authToken=e,this.tokenContext.store(this.authToken,{permanent:t.remember}),this.emitter.emit("auth:token-changed",{old:i,new:this.authToken}),this.emitter.emit("auth:login",{token:this.authToken})},t.getDetailedErrorFromResponse=function(t){var i=[],n=[];e(t.body)&&void 0!==t.body.error.details&&(n=t.body.error.details);for(var o=0;o<n.length;o++){var r=n[o];r.error_type&&i.push(r.error_type+"_"+r.parameter)}return new d("Error creating user",i)},t}(),b=function(){function t(t){this.config=t.config,this.client=t.client,this.emitter=t.emitter}return t.prototype.parseInAppBrowserOptions=function(t){if(!t)return"";var e=[];for(var i in t){var n=void 0;n="boolean"==typeof t[i]?t[i]?"yes":"no":t[i],e.push(i+"="+n)}return e.join(",")},t.prototype.inAppBrowserFlow=function(t,e,i){var n=this;void 0===e&&(e={}),void 0===i&&(i={});var o=new f;return window&&window.cordova?(this.emitter.once("cordova:deviceready",function(){if(!window.cordova.InAppBrowser)return void o.reject(new Error("InAppBrowser plugin missing"));n.client.post("/auth/login/"+t).send({app_id:n.config.get("app_id"),callback:window.location.href,data:e}).end(function(t,e){if(t)o.reject(t);else{var r=window.cordova.InAppBrowser.open(e.body.data.url,"_blank",n.parseInAppBrowserOptions(i.inAppBrowserOptions)),s=function(){o.reject(new Error("InAppBrowser exit"))},a=function(){o.reject(new Error("InAppBrowser loaderror"))},u=function(t){if("http://auth.ionic.io"===t.url.slice(0,20)){for(var e=t.url.split("#")[0].split("?")[1],i=e.split("&"),n={},u=0;u<i.length;u++){var c=i[u].split("=");n[c[0]]=c[1]}r.removeEventListener("exit",s),r.removeEventListener("loaderror",a),r.close(),n.error?o.reject(new Error(decodeURIComponent(n.error))):o.resolve({token:n.token,signup:Boolean(parseInt(n.signup,10))})}};r.addEventListener("exit",s),r.addEventListener("loaderror",a),r.addEventListener("loadstart",u)}})}),o.promise):o.reject(new Error("Cordova is missing--can't login with InAppBrowser flow."))},t}(),_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return v(e,t),e.prototype.authenticate=function(t,e){var i=new f;return t.email&&t.password?(this.client.post("/auth/login").send({app_id:this.config.get("app_id"),email:t.email,password:t.password}).end(function(t,e){t?i.reject(t):i.resolve({token:e.body.data.token})}),i.promise):i.reject(new Error("email and password are required for basic authentication"))},e.prototype.requestPasswordReset=function(t){var e=new f;return t?(this.client.post("/auth/users/password/reset").send({app_id:this.config.get("app_id"),email:t,flow:"app"}).end(function(t,i){t?e.reject(t):e.resolve()}),e.promise):e.reject(new Error("Email is required for password reset request."))},e.prototype.confirmPasswordReset=function(t,e,i){var n=new f;return e&&t&&i?(this.client.post("/auth/users/password").send({reset_token:e,new_password:i,email:t}).end(function(t,e){t?n.reject(t):n.resolve()}),n.promise):n.reject(new Error("Code, new password, and email are required."))},e.prototype.signup=function(t){var e=new f;if(!t.email)return e.reject(new d("Email is required for email/password auth signup.",["required_email"]));if(!i(t.email))return e.reject(new d("Invalid email supplied.",["invalid_email"]));if(!t.password)return e.reject(new d("Password is required for email/password auth signup.",["required_password"]));var n={app_id:this.config.get("app_id"),email:t.email,password:t.password};return t.username&&(n.username=t.username),t.image&&(n.image=t.image),t.name&&(n.name=t.name),t.custom&&(n.custom=t.custom),this.client.post("/auth/users").send(n).end(function(t,i){t?e.reject(w.getDetailedErrorFromResponse(t.response)):e.resolve()}),e.promise},e}(b),k=function(){function t(t){this.config=t.config,this.client=t.client,this.userService=t.userService,this.tokenContext=t.tokenContext,this.emitter=t.emitter}return t.prototype.getToken=function(){return this.tokenContext.get()},t.prototype.storeToken=function(t){var e=this.authToken;this.authToken=t,this.tokenContext.store(this.authToken,{permanent:!0}),this.emitter.emit("auth:token-changed",{old:e,new:this.authToken}),this.emitter.emit("auth:login",{token:this.authToken})},t}(),j=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return v(e,t),e.prototype.logout=function(){var t=new f;this.emitter.emit("auth:token-changed",{old:this.tokenContext.get(),new:void 0}),this.emitter.emit("auth:logout",{}),this.tokenContext.delete();var e=this.userService.current();return e.unstore(),e.clear(),window.plugins.googleplus.logout(function(){t.resolve()},function(e){t.reject(e)}),t.promise},e.prototype.login=function(){var t=this,e=new f,i=this.config.settings.auth;return this.emitter.once("cordova:deviceready",function(){var n=["profile","email"];return window&&window.cordova?window.plugins&&window.plugins.googleplus?i&&i.google&&i.google.webClientId?(i.google.scope&&i.google.scope.forEach(function(t){-1===n.indexOf(t)&&n.push(t)}),void window.plugins.googleplus.login({webClientId:i.google.webClientId,offline:!0,scopes:n.join(" ")},function(i){if(!i.serverAuthCode)return void e.reject(new Error("Failed to retrieve offline access token."));var o={app_id:t.config.get("app_id"),serverAuthCode:i.serverAuthCode,additional_fields:n,flow:"native-mobile"};t.client.post("/auth/login/google").send(o).end(function(i,n){i?e.reject(i):(t.storeToken(n.body.data.token),t.userService.load().then(function(){t.userService.current().store(),e.resolve({token:n.body.data.token,signup:Boolean(parseInt(n.body.data.signup,10))})}))})},function(t){e.reject(t)})):void e.reject(new Error("Missing google web client id. Please visit http://docs.ionic.io/services/users/google-auth.html#native")):void e.reject(new Error("GooglePlus cordova plugin is missing. Install the plugin by following the instructions here: https://github.com/EddyVerbruggen/cordova-plugin-googleplus")):void e.reject(new Error("Cordova is missing"))}),e.promise},e}(k),S=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return v(e,t),e.prototype.logout=function(){var t=new f;this.emitter.emit("auth:token-changed",{old:this.tokenContext.get(),new:void 0}),this.emitter.emit("auth:logout",{}),this.tokenContext.delete();var e=this.userService.current();return e.unstore(),e.clear(),window.facebookConnectPlugin.logout(function(){t.resolve()},function(e){t.reject(e)}),t.promise},e.prototype.login=function(){var t=this,e=new f,i=this.config.settings.auth,n=["public_profile","email"];return i&&i.facebook&&i.facebook.scope&&i.facebook.scope.forEach(function(t){-1===n.indexOf(t)&&n.push(t)}),this.emitter.once("cordova:deviceready",function(){return window&&window.cordova?window.facebookConnectPlugin?void window.facebookConnectPlugin.login(n,function(i){n.splice(n.indexOf("public_profile"),1);var o={app_id:t.config.get("app_id"),access_token:i.authResponse.accessToken,additional_fields:n,flow:"native-mobile"};t.client.post("/auth/login/facebook").send(o).end(function(i,n){i?e.reject(i):(t.storeToken(n.body.data.token),t.userService.load().then(function(){t.userService.current().store(),e.resolve({token:n.body.data.token,signup:Boolean(parseInt(n.body.data.signup,10))})}))})},function(t){e.reject(t)}):void e.reject(new Error("Please install the cordova-plugin-facebook4 plugin")):void e.reject(new Error("Cordova is missing."))}),e.promise},e}(k),E=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return v(e,t),e.prototype.authenticate=function(t,e){return void 0===t&&(t={}),this.inAppBrowserFlow("custom",t,e)},e}(b),T=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return v(e,t),e.prototype.authenticate=function(t,e){return void 0===t&&(t={}),this.inAppBrowserFlow("twitter",t,e)},e}(b),C=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return v(e,t),e.prototype.authenticate=function(t,e){return void 0===t&&(t={}),this.inAppBrowserFlow("facebook",t,e)},e}(b),P=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return v(e,t),e.prototype.authenticate=function(t,e){return void 0===t&&(t={}),this.inAppBrowserFlow("github",t,e)},e}(b),O=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return v(e,t),e.prototype.authenticate=function(t,e){return void 0===t&&(t={}),this.inAppBrowserFlow("google",t,e)},e}(b),x=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return v(e,t),e.prototype.authenticate=function(t,e){return void 0===t&&(t={}),this.inAppBrowserFlow("instagram",t,e)},e}(b),A=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return v(e,t),e.prototype.authenticate=function(t,e){return void 0===t&&(t={}),this.inAppBrowserFlow("linkedin",t,e)},e}(b),I="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},R=o(function(t){function e(t){if(t)return i(t)}function i(t){for(var i in e.prototype)t[i]=e.prototype[i];return t}void 0!==t&&(t.exports=e),e.prototype.on=e.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},e.prototype.once=function(t,e){function i(){this.off(t,i),e.apply(this,arguments)}return i.fn=e,this.on(t,i),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i=this._callbacks["$"+t];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var n,o=0;o<i.length;o++)if((n=i[o])===e||n.fn===e){i.splice(o,1);break}return this},e.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),i=this._callbacks["$"+t];if(i){i=i.slice(0);for(var n=0,o=i.length;n<o;++n)i[n].apply(this,e)}return this},e.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},e.prototype.hasListeners=function(t){return!!this.listeners(t).length}}),D=r,q=D,L=s;s.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,this},s.prototype.parse=function(t){return this._parser=t,this},s.prototype.responseType=function(t){return this._responseType=t,this},s.prototype.serialize=function(t){return this._serializer=t,this},s.prototype.timeout=function(t){if(!t||"object"!=typeof t)return this._timeout=t,this._responseTimeout=0,this;for(var e in t)switch(e){case"deadline":this._timeout=t.deadline;break;case"response":this._responseTimeout=t.response;break;default:console.warn("Unknown timeout option",e)}return this},s.prototype.retry=function(t){return 0!==arguments.length&&!0!==t||(t=1),t<=0&&(t=0),this._maxRetries=t,this._retries=0,this},s.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this._end()},s.prototype.then=function(t,e){if(!this._fullfilledPromise){var i=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise(function(t,e){i.end(function(i,n){i?e(i):t(n)})})}return this._fullfilledPromise.then(t,e)},s.prototype.catch=function(t){return this.then(void 0,t)},s.prototype.use=function(t){return t(this),this},s.prototype.ok=function(t){if("function"!=typeof t)throw Error("Callback required");return this._okCallback=t,this},s.prototype._isResponseOK=function(t){return!!t&&(this._okCallback?this._okCallback(t):t.status>=200&&t.status<300)},s.prototype.get=function(t){return this._header[t.toLowerCase()]},s.prototype.getHeader=s.prototype.get,s.prototype.set=function(t,e){if(q(t)){for(var i in t)this.set(i,t[i]);return this}return this._header[t.toLowerCase()]=e,this.header[t]=e,this},s.prototype.unset=function(t){return delete this._header[t.toLowerCase()],delete this.header[t],this},s.prototype.field=function(t,e){if(null===t||void 0===t)throw new Error(".field(name, val) name can not be empty");if(this._data&&console.error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()"),q(t)){for(var i in t)this.field(i,t[i]);return this}if(Array.isArray(e)){for(var n in e)this.field(t,e[n]);return this}if(null===e||void 0===e)throw new Error(".field(name, val) val can not be empty");return"boolean"==typeof e&&(e=""+e),this._getFormData().append(t,e),this},s.prototype.abort=function(){return this._aborted?this:(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort"),this)},s.prototype.withCredentials=function(t){return void 0==t&&(t=!0),this._withCredentials=t,this},s.prototype.redirects=function(t){return this._maxRedirects=t,this},s.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},s.prototype.send=function(t){var e=q(t),i=this._header["content-type"];if(this._formData&&console.error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()"),e&&!this._data)Array.isArray(t)?this._data=[]:this._isHost(t)||(this._data={});else if(t&&this._data&&this._isHost(this._data))throw Error("Can't merge these send calls");if(e&&q(this._data))for(var n in t)this._data[n]=t[n];else"string"==typeof t?(i||this.type("form"),i=this._header["content-type"],this._data="application/x-www-form-urlencoded"==i?this._data?this._data+"&"+t:t:(this._data||"")+t):this._data=t;return!e||this._isHost(t)?this:(i||this.type("json"),this)},s.prototype.sortQuery=function(t){return this._sort=void 0===t||t,this},s.prototype._finalizeQueryString=function(){var t=this._query.join("&");if(t&&(this.url+=(this.url.indexOf("?")>=0?"&":"?")+t),this._query.length=0,this._sort){var e=this.url.indexOf("?");if(e>=0){var i=this.url.substring(e+1).split("&");"function"==typeof this._sort?i.sort(this._sort):i.sort(),this.url=this.url.substring(0,e)+"?"+i.join("&")}}},s.prototype._appendQueryString=function(){console.trace("Unsupported")},s.prototype._timeoutError=function(t,e,i){if(!this._aborted){var n=new Error(t+e+"ms exceeded");n.timeout=e,n.code="ECONNABORTED",n.errno=i,this.timedout=!0,this.abort(),this.callback(n)}},s.prototype._setTimeouts=function(){var t=this;this._timeout&&!this._timer&&(this._timer=setTimeout(function(){t._timeoutError("Timeout of ",t._timeout,"ETIME")},this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout(function(){t._timeoutError("Response timeout of ",t._responseTimeout,"ETIMEDOUT")},this._responseTimeout))};var U=function(t){return t.split(/ *; */).shift()},B=function(t){return t.split(/ *; */).reduce(function(t,e){var i=e.split(/ *= */),n=i.shift(),o=i.shift();return n&&o&&(t[n]=o),t},{})},H=function(t){return t.split(/ *, */).reduce(function(t,e){var i=e.split(/ *; */),n=i[0].slice(1,-1);return t[i[1].split(/ *= */)[1].slice(1,-1)]=n,t},{})},M=function(t,e){return delete t["content-type"],delete t["content-length"],delete t["transfer-encoding"],delete t.host,e&&delete t.cookie,t},z={type:U,params:B,parseLinks:H,cleanHeader:M},N=z,F=u;u.prototype.get=function(t){return this.header[t.toLowerCase()]},u.prototype._setHeaderProperties=function(t){var e=t["content-type"]||"";this.type=N.type(e);var i=N.params(e);for(var n in i)this[n]=i[n];this.links={};try{t.link&&(this.links=N.parseLinks(t.link))}catch(t){}},u.prototype._setStatusProperties=function(t){var e=t/100|0;this.status=this.statusCode=t,this.statusType=e,this.info=1==e,this.ok=2==e,this.redirect=3==e,this.clientError=4==e,this.serverError=5==e,this.error=(4==e||5==e)&&this.toError(),this.accepted=202==t,this.noContent=204==t,this.badRequest=400==t,this.unauthorized=401==t,this.notAcceptable=406==t,this.forbidden=403==t,this.notFound=404==t};var $=["ECONNRESET","ETIMEDOUT","EADDRINFO","ESOCKETTIMEDOUT"],X=function(t,e){return!!(t&&t.code&&~$.indexOf(t.code))||(!!(e&&e.status&&e.status>=500)||(!!(t&&"timeout"in t&&"ECONNABORTED"==t.code)||!!(t&&"crossDomain"in t)))},G=o(function(t,e){function i(){}function n(t){if(!f(t))return t;var e=[];for(var i in t)o(e,i,t[i]);return e.join("&")}function o(t,e,i){if(null!=i)if(Array.isArray(i))i.forEach(function(i){o(t,e,i)});else if(f(i))for(var n in i)o(t,e+"["+n+"]",i[n]);else t.push(encodeURIComponent(e)+"="+encodeURIComponent(i));else null===i&&t.push(encodeURIComponent(e))}function r(t){for(var e,i,n={},o=t.split("&"),r=0,s=o.length;r<s;++r)e=o[r],i=e.indexOf("="),-1==i?n[decodeURIComponent(e)]="":n[decodeURIComponent(e.slice(0,i))]=decodeURIComponent(e.slice(i+1));return n}function s(t){var e,i,n,o,r=t.split(/\r?\n/),s={};r.pop();for(var a=0,u=r.length;a<u;++a)i=r[a],e=i.indexOf(":"),n=i.slice(0,e).toLowerCase(),o=m(i.slice(e+1)),s[n]=o;return s}function a(t){return/[\/+]json\b/.test(t)}function u(t){this.req=t,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||void 0===this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var e=this.xhr.status;1223===e&&(e=204),this._setStatusProperties(e),this.header=this.headers=s(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),null===this.text&&t._responseType?this.body=this.xhr.response:this.body="HEAD"!=this.req.method?this._parseBody(this.text?this.text:this.xhr.response):null}function c(t,e){var i=this;this._query=this._query||[],this.method=t,this.url=e,this.header={},this._header={},this.on("end",function(){var t=null,e=null;try{e=new u(i)}catch(e){return t=new Error("Parser is unable to parse the response"),t.parse=!0,t.original=e,i.xhr?(t.rawResponse=void 0===i.xhr.responseType?i.xhr.responseText:i.xhr.response,t.status=i.xhr.status?i.xhr.status:null,t.statusCode=t.status):(t.rawResponse=null,t.status=null),i.callback(t)}i.emit("response",e);var n;try{i._isResponseOK(e)||(n=new Error(e.statusText||"Unsuccessful HTTP response"),n.original=t,n.response=e,n.status=e.status)}catch(t){n=t}n?i.callback(n,e):i.callback(null,e)})}function p(t,e,i){var n=v("DELETE",t);return"function"==typeof e&&(i=e,e=null),e&&n.send(e),i&&n.end(i),n}var h;"undefined"!=typeof window?h=window:"undefined"!=typeof self?h=self:(console.warn("Using browser-only version of superagent in non-browser environment"),h=I);var l=R,d=L,f=D,g=F,y=X,v=e=t.exports=function(t,i){return"function"==typeof i?new e.Request("GET",t).end(i):1==arguments.length?new e.Request("GET",t):new e.Request(t,i)};e.Request=c,v.getXHR=function(){if(!(!h.XMLHttpRequest||h.location&&"file:"==h.location.protocol&&h.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}throw Error("Browser-only version of superagent could not find XHR")};var m="".trim?function(t){return t.trim()}:function(t){return t.replace(/(^\s*|\s*$)/g,"")};v.serializeObject=n,v.parseString=r,v.types={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},v.serialize={"application/x-www-form-urlencoded":n,"application/json":JSON.stringify},v.parse={"application/x-www-form-urlencoded":r,"application/json":JSON.parse},g(u.prototype),u.prototype._parseBody=function(t){var e=v.parse[this.type];return this.req._parser?this.req._parser(this,t):(!e&&a(this.type)&&(e=v.parse["application/json"]),e&&t&&(t.length||t instanceof Object)?e(t):null)},u.prototype.toError=function(){var t=this.req,e=t.method,i=t.url,n="cannot "+e+" "+i+" ("+this.status+")",o=new Error(n);return o.status=this.status,o.method=e,o.url=i,o},v.Response=u,l(c.prototype),d(c.prototype),c.prototype.type=function(t){return this.set("Content-Type",v.types[t]||t),this},c.prototype.accept=function(t){return this.set("Accept",v.types[t]||t),this},c.prototype.auth=function(t,e,i){switch("object"==typeof e&&null!==e&&(i=e),i||(i={type:"function"==typeof btoa?"basic":"auto"}),i.type){case"basic":this.set("Authorization","Basic "+btoa(t+":"+e));break;case"auto":this.username=t,this.password=e;break;case"bearer":this.set("Authorization","Bearer "+t)}return this},c.prototype.query=function(t){return"string"!=typeof t&&(t=n(t)),t&&this._query.push(t),this},c.prototype.attach=function(t,e,i){if(e){if(this._data)throw Error("superagent can't mix .send() and .attach()");this._getFormData().append(t,e,i||e.name)}return this},c.prototype._getFormData=function(){return this._formData||(this._formData=new h.FormData),this._formData},c.prototype.callback=function(t,e){if(this._maxRetries&&this._retries++<this._maxRetries&&y(t,e))return this._retry();var i=this._callback;this.clearTimeout(),t&&(this._maxRetries&&(t.retries=this._retries-1),this.emit("error",t)),i(t,e)},c.prototype.crossDomainError=function(){var t=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");t.crossDomain=!0,t.status=this.status,t.method=this.method,t.url=this.url,this.callback(t)},c.prototype.buffer=c.prototype.ca=c.prototype.agent=function(){return console.warn("This is not supported in browser version of superagent"),this},c.prototype.pipe=c.prototype.write=function(){throw Error("Streaming is not supported in browser version of superagent")},c.prototype._isHost=function(t){return t&&"object"==typeof t&&!Array.isArray(t)&&"[object Object]"!==Object.prototype.toString.call(t)},c.prototype.end=function(t){return this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=t||i,this._finalizeQueryString(),this._end()},c.prototype._end=function(){var t=this,e=this.xhr=v.getXHR(),i=this._formData||this._data;this._setTimeouts(),e.onreadystatechange=function(){var i=e.readyState;if(i>=2&&t._responseTimeoutTimer&&clearTimeout(t._responseTimeoutTimer),4==i){var n;try{n=e.status}catch(t){n=0}if(!n){if(t.timedout||t._aborted)return;return t.crossDomainError()}t.emit("end")}};var n=function(e,i){i.total>0&&(i.percent=i.loaded/i.total*100),i.direction=e,t.emit("progress",i)};if(this.hasListeners("progress"))try{e.onprogress=n.bind(null,"download"),e.upload&&(e.upload.onprogress=n.bind(null,"upload"))}catch(t){}try{this.username&&this.password?e.open(this.method,this.url,!0,this.username,this.password):e.open(this.method,this.url,!0)}catch(t){return this.callback(t)}if(this._withCredentials&&(e.withCredentials=!0),!this._formData&&"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof i&&!this._isHost(i)){var o=this._header["content-type"],r=this._serializer||v.serialize[o?o.split(";")[0]:""];!r&&a(o)&&(r=v.serialize["application/json"]),r&&(i=r(i))}for(var s in this.header)null!=this.header[s]&&this.header.hasOwnProperty(s)&&e.setRequestHeader(s,this.header[s]);return this._responseType&&(e.responseType=this._responseType),this.emit("request",this),e.send(void 0!==i?i:null),this},v.get=function(t,e,i){var n=v("GET",t);return"function"==typeof e&&(i=e,e=null),e&&n.query(e),i&&n.end(i),n},v.head=function(t,e,i){var n=v("HEAD",t);return"function"==typeof e&&(i=e,e=null),e&&n.query(e),i&&n.end(i),n},v.options=function(t,e,i){var n=v("OPTIONS",t);return"function"==typeof e&&(i=e,e=null),e&&n.send(e),i&&n.end(i),n},v.del=p,v.delete=p,v.patch=function(t,e,i){var n=v("PATCH",t);return"function"==typeof e&&(i=e,e=null),e&&n.send(e),i&&n.end(i),n},v.post=function(t,e,i){var n=v("POST",t);return"function"==typeof e&&(i=e,e=null),e&&n.send(e),i&&n.end(i),n},v.put=function(t,e,i){var n=v("PUT",t);return"function"==typeof e&&(i=e,e=null),e&&n.send(e),i&&n.end(i),n}}),J=G.Request,K=Object.freeze({default:G,__moduleExports:G,Request:J}),V=function(){function t(t,e,i){this.tokenContext=t,this.baseUrl=e,void 0===i&&(i=K.default||K),this.req=i}return t.prototype.get=function(t){return this.supplement(this.req.get,t)},t.prototype.post=function(t){return this.supplement(this.req.post,t)},t.prototype.put=function(t){return this.supplement(this.req.put,t)},t.prototype.patch=function(t){return this.supplement(this.req.patch,t)},t.prototype.delete=function(t){return this.supplement(this.req.delete,t)},t.prototype.request=function(t,e){return this.supplement(this.req.bind(this.req,t),e)},t.prototype.supplement=function(t,e){if("/"!==e.substring(0,1))throw Error("endpoint must start with leading slash");var i=t(this.baseUrl+e),n=this.tokenContext.get();return n&&i.set("Authorization","Bearer "+n),i},t}(),Q=function(){function t(){this.urls={api:"https://api.ionic.io",web:"https://web.ionic.io"}}return t.prototype.register=function(t){this.settings=t},t.prototype.get=function(t){if(this.settings&&this.settings.core)return this.settings.core[t]},t.prototype.getURL=function(t){var e=this.settings&&this.settings.core&&this.settings.core.urls||{};return e[t]?e[t]:this.urls[t]},t}(),W=function(){function t(t,e){void 0===e&&(e={}),this.options=e,this.app=t.appStatus,this.device=t.device,this.emitter=t.emitter,this.logger=t.logger,this.registerEventHandlers()}return t.prototype.bootstrap=function(){var t=this,e=["pause","resume"];document.addEventListener("deviceready",function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];t.emitter.emit("cordova:deviceready",{args:i});for(var o=0,r=e;o<r.length;o++){var s=r[o];!function(e){document.addEventListener(e,function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];t.emitter.emit("cordova:"+e,{args:i})},!1)}(s)}},!1)},t.prototype.registerEventHandlers=function(){var t=this;this.emitter.on("cordova:pause",function(){t.app.closed=!0}),this.emitter.on("cordova:resume",function(){t.app.closed=!1})},t}(),Y=function(){function t(t){this._version="0.16.2",this.config=t.config,this.logger=t.logger,this.emitter=t.emitter,this.insights=t.insights}return t.prototype.init=function(){this.registerEventHandlers(),this.onResume()},Object.defineProperty(t.prototype,"version",{get:function(){return this._version},enumerable:!0,configurable:!0}),t.prototype.onResume=function(){this.insights.options.enabled&&this.insights.track("mobileapp.opened")},t.prototype.registerEventHandlers=function(){var t=this;this.emitter.on("cordova:resume",function(){t.onResume()}),this.emitter.on("push:notification",function(e){(e.message.app.asleep||e.message.app.closed)&&t.insights.options.enabled&&t.insights.track("mobileapp.opened.push")})},t}(),Z=new Error("Missing deploy plugin: `ionic-plugin-deploy`"),tt=function(){function t(t,e){void 0===e&&(e={});var i=this;this.options=e,this.channel="production",this.config=t.config,this.emitter=t.emitter,this.logger=t.logger,this.emitter.once("device:ready",function(){i._getPlugin()&&i.plugin.init(i.config.get("app_id"),i.config.getURL("api")),i.emitter.emit("deploy:ready")})}return t.prototype.check=function(){var t=this,e=new f;return this.emitter.once("deploy:ready",function(){t._getPlugin()?t.plugin.check(t.config.get("app_id"),t.channel,function(i){
i&&"true"===i?(t.logger.info("Ionic Deploy: an update is available"),e.resolve(!0)):(t.logger.info("Ionic Deploy: no updates available"),e.resolve(!1))},function(i){t.logger.error("Ionic Deploy: encountered an error while checking for updates"),e.reject(i)}):e.reject(Z)}),e.promise},t.prototype.download=function(t){var e=this;void 0===t&&(t={});var i=new f;return this.emitter.once("deploy:ready",function(){e._getPlugin()?e.plugin.download(e.config.get("app_id"),function(n){"true"===n?(e.logger.info("Ionic Deploy: download complete"),i.resolve()):"false"===n?i.reject(new Error("Ionic Deploy: Download has failed: see native logs.")):t.onProgress&&t.onProgress(n)},function(t){i.reject(t)}):i.reject(Z)}),i.promise},t.prototype.extract=function(t){var e=this;void 0===t&&(t={});var i=new f;return this.emitter.once("deploy:ready",function(){e._getPlugin()?e.plugin.extract(e.config.get("app_id"),function(n){"done"===n?(e.logger.info("Ionic Deploy: extraction complete"),i.resolve()):t.onProgress&&t.onProgress(n)},function(t){i.reject(t)}):i.reject(Z)}),i.promise},t.prototype.load=function(){var t=this;this.emitter.once("deploy:ready",function(){t._getPlugin()&&t.plugin.redirect(t.config.get("app_id"))})},t.prototype.info=function(){var t=this,e=new f;return this.emitter.once("deploy:ready",function(){t._getPlugin()?t.plugin.info(t.config.get("app_id"),function(t){e.resolve(t)},function(t){e.reject(t)}):e.reject(Z)}),e.promise},t.prototype.getSnapshots=function(){var t=this,e=new f;return this.emitter.once("deploy:ready",function(){t._getPlugin()?t.plugin.getVersions(t.config.get("app_id"),function(t){e.resolve(t)},function(t){e.reject(t)}):e.reject(Z)}),e.promise},t.prototype.deleteSnapshot=function(t){var e=this,i=new f;return this.emitter.once("deploy:ready",function(){e._getPlugin()?e.plugin.deleteVersion(e.config.get("app_id"),t,function(t){i.resolve(t)},function(t){i.reject(t)}):i.reject(Z)}),i.promise},t.prototype.getMetadata=function(t){var e=this,i=new f;return this.emitter.once("deploy:ready",function(){e._getPlugin()?e.plugin.getMetadata(e.config.get("app_id"),t,function(t){i.resolve(t.metadata)},function(t){i.reject(t)}):i.reject(Z)}),i.promise},t.prototype._getPlugin=function(){return void 0===window.IonicDeploy?void this.logger.warn("Ionic Deploy: Disabled! Deploy plugin is not installed or has not loaded. Have you run `ionic plugin add ionic-plugin-deploy` yet?"):(this.plugin||(this.plugin=window.IonicDeploy),this.plugin)},t}(),et=function(){function t(t){this.deps=t,this.native=this.deps.nativeDevice,this.emitter=this.deps.emitter,this.type=this.determineDeviceType(),this.registerEventHandlers()}return t.prototype.isAndroid=function(){return"android"===this.type},t.prototype.isIOS=function(){return"iphone"===this.type||"ipad"===this.type},t.prototype.isConnectedToNetwork=function(t){if(void 0===t&&(t={}),void 0===navigator.connection||void 0===navigator.connection.type||"undefined"==typeof Connection)return!t.strictMode;switch(navigator.connection.type){case Connection.ETHERNET:case Connection.WIFI:case Connection.CELL_2G:case Connection.CELL_3G:case Connection.CELL_4G:case Connection.CELL:return!0;default:return!1}},t.prototype.registerEventHandlers=function(){var t=this;"unknown"===this.type?this.emitter.emit("device:ready"):this.emitter.once("cordova:deviceready",function(){t.emitter.emit("device:ready")})},t.prototype.determineDeviceType=function(){var t=navigator.userAgent,e=t.match(/iPad/i);if(e&&"ipad"===e[0].toLowerCase())return"ipad";var i=t.match(/iPhone/i);if(i&&"iphone"===i[0].toLowerCase())return"iphone";var n=t.match(/Android/i);return n&&"android"===n[0].toLowerCase()?"android":"unknown"},t}(),it=function(){function t(t,e,i){this.key=t,this.event=e,this.handler=i}return t}(),nt=function(){function t(){this.n=0,this.eventReceivers={},this.eventsEmitted={}}return t.prototype.on=function(t,e){void 0===this.eventReceivers[t]&&(this.eventReceivers[t]={});var i=new it(this.n,t,e);return this.n++,this.eventReceivers[t][i.key]=i,i},t.prototype.off=function(t){if(void 0===this.eventReceivers[t.event]||void 0===this.eventReceivers[t.event][t.key])throw new Error("unknown event receiver");delete this.eventReceivers[t.event][t.key]},t.prototype.once=function(t,e){var i=this;this.emitted(t)?e():this.on(t,function(){i.emitted(t)||e()})},t.prototype.emit=function(t,e){void 0===this.eventReceivers[t]&&(this.eventReceivers[t]={}),void 0===this.eventsEmitted[t]&&(this.eventsEmitted[t]=0);for(var i in this.eventReceivers[t])this.eventReceivers[t][i].handler(e);this.eventsEmitted[t]+=1},t.prototype.emitted=function(t){return void 0===this.eventsEmitted[t]?0:this.eventsEmitted[t]},t}(),ot=function(){function t(t,e,i){void 0===i&&(i=1),this.appId=t,this.stat=e,this.value=i,this.appId=t,this.stat=e,this.value=i,this.created=new Date}return t.prototype.toJSON=function(){return{app_id:this.appId,stat:this.stat,value:this.value,created:this.created.toISOString()}},t}(),rt=function(){function t(t,e){void 0===e&&(e={});var i=this;this.options=e,this.app=t.appStatus,this.storage=t.storage,this.config=t.config,this.client=t.client,this.device=t.device,this.logger=t.logger,this.batch=[],void 0===this.options.enabled&&(this.options.enabled=!0),void 0===this.options.intervalSubmit&&(this.options.intervalSubmit=6e4),void 0===this.options.intervalActiveCheck&&(this.options.intervalActiveCheck=1e3),void 0===this.options.submitCount&&(this.options.submitCount=100),this.options.enabled&&(this.options.intervalSubmit&&setInterval(function(){i.submit()},this.options.intervalSubmit),this.options.intervalActiveCheck&&setInterval(function(){i.app.closed||i.checkActivity()},this.options.intervalActiveCheck))}return t.prototype.track=function(t,e){void 0===e&&(e=1),this.options.enabled?this.trackStat(new ot(this.config.get("app_id"),t,e)):this.logger.warn("Ionic Insights: Will not track(), insights are not enabled.")},t.prototype.checkActivity=function(){var t=this.storage.get("insights_session");if(t){new Date(t).getTime()+36e5<(new Date).getTime()&&this.markActive()}else this.markActive()},t.prototype.markActive=function(){if(this.track("mobileapp.active"),this.device.native&&"string"==typeof this.device.native.platform){var t=this.device.native,e=this.normalizeDevicePlatform(t.platform),i=this.normalizeVersion(t.version),n=this.normalizeVersion(t.cordova);this.track("mobileapp.active.platform."+e),this.track("mobileapp.active.platform."+e+"."+i),this.track("mobileapp.active.cordova."+n)}else this.logger.warn("Ionic Insights: Device information unavailable.");this.storage.set("insights_session",(new Date).toISOString())},t.prototype.normalizeDevicePlatform=function(t){return t.toLowerCase().replace(/[^a-z0-9_]/g,"_")},t.prototype.normalizeVersion=function(t){var e;try{e=String(n(t).major)}catch(t){e="unknown"}return e},t.prototype.trackStat=function(t){this.batch.push(t),this.shouldSubmit()&&this.submit()},t.prototype.shouldSubmit=function(){return this.batch.length>=this.options.submitCount},t.prototype.submit=function(){var t=this;if(0!==this.batch.length){for(var e=[],i=0,n=this.batch;i<n.length;i++){var o=n[i];e.push(o.toJSON())}this.client.post("/insights").send({insights:e}).end(function(e,i){e&&t.logger.error("Ionic Insights: Could not send insights.",e)}),this.batch=[]}},t}(),st=function(){function t(t){void 0===t&&(t={}),this.options=t,this.infofn=console.log.bind(console),this.warnfn=console.warn.bind(console),this.errorfn=console.error.bind(console)}return t.prototype.info=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];this.options.silent||this.infofn.apply(this,[t].concat(e))},t.prototype.warn=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];this.options.silent||this.warnfn.apply(this,[t].concat(e))},t.prototype.error=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];this.errorfn.apply(this,[t].concat(e))},t}(),at=function(){function t(){}return t.fromPluginData=function(e){var i=new t;return i.raw=e,i.text=e.message,i.title=e.title,i.count=e.count,i.sound=e.sound,i.image=e.image,i.app={asleep:!e.additionalData.foreground,closed:e.additionalData.coldstart},i.payload=e.additionalData.payload,i},t.prototype.toString=function(){return'<PushMessage ["'+this.title+'"]>'},t}(),ut=function(){function t(t,e){if(void 0===e&&(e={}),this.options=e,this.blockRegistration=!1,this.blockUnregister=!1,this.blockSaveToken=!1,this.registered=!1,this.config=t.config,this.auth=t.auth,this.userService=t.userService,this.device=t.device,this.client=t.client,this.emitter=t.emitter,this.storage=t.storage,this.logger=t.logger,this.device.isAndroid()&&!this.options.sender_id)return void this.logger.error("Ionic Push: GCM project number not found (https://docs.ionic.io/services/push/)");e.pluginConfig||(e.pluginConfig={}),this.device.isAndroid()&&(e.pluginConfig.android||(e.pluginConfig.android={}),e.pluginConfig.android.senderID||(e.pluginConfig.android.senderID=this.options.sender_id)),this.options=e}return Object.defineProperty(t.prototype,"token",{get:function(){return this._token||(this._token=this.storage.get("push_token")||void 0),this._token},set:function(t){t?this.storage.set("push_token",t):this.storage.delete("push_token"),this._token=t},enumerable:!0,configurable:!0}),t.prototype.saveToken=function(t,e){var i=this;void 0===e&&(e={});var n=new f,o={token:t.token,app_id:this.config.get("app_id")};if(!e.ignore_user){var r=this.userService.current();this.auth.isAuthenticated()&&(o.user_id=r.id)}return this.blockSaveToken?n.reject(new Error("A token save operation is already in progress.")):(this.client.post("/push/tokens").send(o).end(function(e,r){e?(i.blockSaveToken=!1,i.logger.error("Ionic Push:",e),n.reject(e)):(i.blockSaveToken=!1,i.logger.info("Ionic Push: saved push token: "+t.token),o.user_id&&i.logger.info("Ionic Push: added push token to user: "+o.user_id),t.id=r.body.data.id,t.type=r.body.data.type,t.saved=!0,n.resolve(t))}),n.promise)},t.prototype.register=function(){var t=this,e=new f;return this.blockRegistration?e.reject(new Error("Another registration is already in progress.")):(this.blockRegistration=!0,this.emitter.once("device:ready",function(){var i=t._getPushPlugin();i?(t.plugin=i.init(t.options.pluginConfig),t.plugin.on("registration",function(i){t.blockRegistration=!1,t.token={token:i.registrationId,registered:!1,saved:!1},t.token.registered=!0,e.resolve(t.token)}),t.plugin.on("error",function(i){t.logger.error("Ionic Push:",i),e.reject(i)}),t._callbackRegistration(),t.registered=!0):e.reject(new Error("Push plugin not found! See logs."))}),e.promise)},t.prototype.unregister=function(){var t=this,e=new f;if(this.blockUnregister)return e.reject(new Error("An unregister operation is already in progress."));var i=this.token;if(!i)return e.resolve();var n={token:i.token,app_id:this.config.get("app_id")};return this.plugin&&this.plugin.unregister(function(){},function(){}),this.client.post("/push/tokens/invalidate").send(n).end(function(i,n){t.blockUnregister=!1,i?(t.logger.error("Ionic Push:",i),e.reject(i)):(t.logger.info("Ionic Push: unregistered push token"),delete t.token,e.resolve())}),this.blockUnregister=!0,e.promise},t.prototype._callbackRegistration=function(){var t=this;this.plugin.on("registration",function(e){t.options.debug&&t.logger.info("Ionic Push (debug): device token registered: "+t.token),t.emitter.emit("push:register",t.token)}),this.plugin.on("notification",function(e){var i=at.fromPluginData(e);t.options.debug&&t.logger.info("Ionic Push (debug): notification received: "+i),t.emitter.emit("push:notification",{message:i,raw:e})}),this.plugin.on("error",function(e){t.options.debug&&(t.logger.error("Ionic Push (debug): unexpected error occured."),t.logger.error("Ionic Push:",e)),t.emitter.emit("push:error",{err:e})})},t.prototype._getPushPlugin=function(){var t=window.PushNotification;return t||(this.device.isIOS()||this.device.isAndroid()?this.logger.error("Ionic Push: PushNotification plugin is required. Have you run `ionic plugin add phonegap-plugin-push` ?"):this.logger.warn("Ionic Push: Disabled! Native push notifications will not work in a browser. Run your app on an actual device to use push.")),t},t}(),ct=function(){function t(){}return t.prototype.get=function(t){return localStorage.getItem(t)},t.prototype.set=function(t,e){return localStorage.setItem(t,e)},t.prototype.delete=function(t){return localStorage.removeItem(t)},t}(),pt=function(){function t(){}return t.prototype.get=function(t){return sessionStorage.getItem(t)},t.prototype.set=function(t,e){return sessionStorage.setItem(t,e)},t.prototype.delete=function(t){return sessionStorage.removeItem(t)},t}(),ht=function(){function t(t,e){void 0===e&&(e={prefix:"ionic",cache:!0}),this.options=e,this.strategy=t.strategy,this.storageCache={}}return t.prototype.set=function(t,e){t=this.standardizeKey(t);var i=JSON.stringify(e);this.strategy.set(t,i),this.options.cache&&(this.storageCache[t]=e)},t.prototype.delete=function(t){t=this.standardizeKey(t),this.strategy.delete(t),this.options.cache&&delete this.storageCache[t]},t.prototype.get=function(t){if(t=this.standardizeKey(t),this.options.cache){var e=this.storageCache[t];if(e)return e}var i=this.strategy.get(t);if(!i)return null;try{var n=JSON.parse(i);return this.options.cache&&(this.storageCache[t]=n),n}catch(t){return null}},t.prototype.standardizeKey=function(t){return this.options.prefix+"_"+t},t}(),lt={},dt=function(){function t(t){this.data={},this.setProperties(t)}return t.prototype.setProperties=function(t){if(t instanceof Object)for(var e in t)this.data[e]=t[e]},t.prototype.toJSON=function(){var t=this.data;return{__Ionic_DataTypeSchema:t.name,value:t.value}},t.prototype.isValid=function(){return!(!this.data.name||!this.data.value)},t}(),ft=function(){function t(){}return t.get=function(t,e){return!!lt[t]&&new lt[t](e)},t.getMapping=function(){return lt},Object.defineProperty(t,"Schema",{get:function(){return dt},enumerable:!0,configurable:!0}),t.register=function(t,e){lt[t]=e},t}(),gt=function(){function t(t){if(this.data=[],t instanceof Array)for(var e in t)this.push(t[e])}return t.prototype.toJSON=function(){var t=this.data;return new dt({name:"UniqueArray",value:t}).toJSON()},t.fromStorage=function(e){return new t(e)},t.prototype.push=function(t){-1===this.data.indexOf(t)&&this.data.push(t)},t.prototype.pull=function(t){var e=this.data.indexOf(t);this.data.splice(e,1)},t}();ft.register("UniqueArray",gt);var yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vt=function(){function t(t){this.config=t.config,this.storage=t.storage}return Object.defineProperty(t.prototype,"label",{get:function(){return"user_"+this.config.get("app_id")},enumerable:!0,configurable:!0}),t.prototype.unstore=function(){this.storage.delete(this.label)},t.prototype.store=function(t){this.storage.set(this.label,t.serializeForStorage())},t.prototype.load=function(t){var e=this.storage.get(this.label);return e?(t.id=e.id,t.data=new mt(e.data),t.details=e.details||{},t.social=e.social||{},t.fresh=e.fresh,t):null},t}(),mt=function(){function t(t){void 0===t&&(t={}),this.data={},"object"===(void 0===t?"undefined":yt(t))&&(this.data=t,this.deserializeDataTypes())}return t.prototype.get=function(t,e){return this.data.hasOwnProperty(t)?this.data[t]:0===e||!1===e?e:e||null},t.prototype.set=function(t,e){this.data[t]=e},t.prototype.unset=function(t){delete this.data[t]},t.prototype.deserializeDataTypes=function(){if(this.data)for(var t in this.data)if(this.data[t]&&"object"===yt(this.data[t])&&this.data[t].__Ionic_DataTypeSchema){var e=this.data[t].__Ionic_DataTypeSchema,i=ft.getMapping();i[e]&&(this.data[t]=i[e].fromStorage(this.data[t].value))}},t}(),wt=function(){function t(t){this.details={},this.social={},this.service=t.service,this.fresh=!0,this._unset={},this.data=new mt}return t.prototype.isAnonymous=function(){return!this.id},t.prototype.get=function(t,e){return this.data.get(t,e)},t.prototype.set=function(t,e){return delete this._unset[t],this.data.set(t,e)},t.prototype.unset=function(t){return this._unset[t]=!0,this.data.unset(t)},t.prototype.clear=function(){this.id=void 0,this.data=new mt,this.details={},this.fresh=!0},t.prototype.save=function(){return this._unset={},this.service.save()},t.prototype.delete=function(){return this.service.delete()},t.prototype.load=function(t){return this.service.load(t)},t.prototype.store=function(){this.service.store()},t.prototype.unstore=function(){this.service.unstore()},t.prototype.serializeForAPI=function(){return{email:this.details.email,password:this.details.password,username:this.details.username,image:this.details.image,name:this.details.name,custom:this.data.data}},t.prototype.serializeForStorage=function(){return{id:this.id,data:this.data.data,details:this.details,fresh:this.fresh,social:this.social}},t.prototype.toString=function(){return"<User ["+(this.isAnonymous()?"anonymous":this.id)+"]>"},t}(),bt=function(){function t(t,e){void 0===e&&(e={}),this.config=e,this.client=t.client,this.context=t.context}return t.prototype.current=function(){return this.user||(this.user=this.context.load(new wt({service:this}))),this.user||(this.user=new wt({service:this})),this.user},t.prototype.store=function(){this.context.store(this.current())},t.prototype.unstore=function(){this.context.unstore()},t.prototype.load=function(t){void 0===t&&(t="self");var e=new f,i=this.current();return this.client.get("/auth/users/"+t).end(function(t,n){t?e.reject(t):(i.id=n.body.data.uuid,i.data=new mt(n.body.data.custom),i.details=n.body.data.details,i.fresh=!1,i.social=n.body.data.social,e.resolve())}),e.promise},t.prototype.delete=function(){var t=new f;return this.user?this.user.isAnonymous()?t.reject(new Error("User is anonymous and cannot be deleted from the API.")):(this.unstore(),this.client.delete("/auth/users/"+this.user.id).end(function(e,i){e?t.reject(e):t.resolve()}),t.promise):t.reject(new Error("No user loaded to delete."))},t.prototype.save=function(){var t=this,e=new f;return this.store(),this.user?this.user.isAnonymous()?e.reject(new Error("User is anonymous and cannot be updated in the API. Use load(<id>) or signup a user using auth.")):(this.client.patch("/auth/users/"+this.user.id).send(this.user.serializeForAPI()).end(function(i,n){i?e.reject(i):(t.user&&(t.user.fresh=!1),e.resolve())}),e.promise):e.reject(new Error("No user loaded to save."))},t}(),_t=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===("undefined"==typeof Reflect?"undefined":yt(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},kt=function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":yt(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},jt={},St=function(){function t(){}return Object.defineProperty(t.prototype,"appStatus",{get:function(){return{asleep:!1,closed:!1}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"config",{get:function(){return new Q},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"eventEmitter",{get:function(){return new nt},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logger",{get:function(){var t=this.config,e={};return void 0!==t.settings&&void 0!==t.settings.logger&&(e=t.settings.logger),new st(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"localStorageStrategy",{get:function(){return new ct},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sessionStorageStrategy",{get:function(){return new pt},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"authTokenContext",{get:function(){var t="auth_"+this.config.get("app_id");return new m({storage:new ht({strategy:this.localStorageStrategy}),tempStorage:new ht({strategy:this.sessionStorageStrategy})},t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"client",{get:function(){return new V(this.authTokenContext,this.config.getURL("api"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"insights",{get:function(){var t=this.config,e={};return void 0!==t.settings&&void 0!==t.settings.insights&&(e=t.settings.insights),new rt({appStatus:this.appStatus,storage:new ht({strategy:this.localStorageStrategy}),config:this.config,client:this.client,device:this.device,logger:this.logger},e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"core",{get:function(){return new Y({config:this.config,logger:this.logger,emitter:this.eventEmitter,insights:this.insights})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"device",{get:function(){var t=window.device;return new et({nativeDevice:t,emitter:this.eventEmitter})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cordova",{get:function(){return new W({appStatus:this.appStatus,device:this.device,emitter:this.eventEmitter,logger:this.logger})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"userContext",{get:function(){return new vt({storage:new ht({strategy:this.localStorageStrategy}),config:this.config})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"singleUserService",{get:function(){return new bt({client:this.client,context:this.userContext})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"authModules",{get:function(){var t={config:this.config,client:this.client,emitter:this.eventEmitter};return{basic:new _(t),custom:new E(t),twitter:new T(t),facebook:new C(t),github:new P(t),google:new O(t),instagram:new x(t),linkedin:new A(t)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"auth",{get:function(){return new w({config:this.config,emitter:this.eventEmitter,authModules:this.authModules,tokenContext:this.authTokenContext,userService:this.singleUserService,storage:new ht({strategy:this.localStorageStrategy})})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"facebookAuth",{get:function(){return new S({config:this.config,client:this.client,userService:this.singleUserService,storage:new ht({strategy:this.localStorageStrategy}),tokenContext:this.authTokenContext,emitter:this.eventEmitter})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"googleAuth",{get:function(){return new j({config:this.config,client:this.client,userService:this.singleUserService,storage:new ht({strategy:this.localStorageStrategy}),tokenContext:this.authTokenContext,emitter:this.eventEmitter})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"push",{get:function(){var t=this.config,e={};return void 0!==t.settings&&void 0!==t.settings.push&&(e=t.settings.push),new ut({config:t,auth:this.auth,userService:this.singleUserService,device:this.device,client:this.client,emitter:this.eventEmitter,storage:new ht({strategy:this.localStorageStrategy}),logger:this.logger},e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"deploy",{get:function(){return new tt({config:this.config,emitter:this.eventEmitter,logger:this.logger})},enumerable:!0,configurable:!0}),t}();_t([p,kt("design:type",Object),kt("design:paramtypes",[])],St.prototype,"appStatus",null),_t([p,kt("design:type",Object),kt("design:paramtypes",[])],St.prototype,"config",null),_t([p,kt("design:type",Object),kt("design:paramtypes",[])],St.prototype,"eventEmitter",null),_t([p,kt("design:type",Object),kt("design:paramtypes",[])],St.prototype,"logger",null),_t([p,kt("design:type",Object),kt("design:paramtypes",[])],St.prototype,"localStorageStrategy",null),_t([p,kt("design:type",Object),kt("design:paramtypes",[])],St.prototype,"sessionStorageStrategy",null),_t([p,kt("design:type",Object),kt("design:paramtypes",[])],St.prototype,"authTokenContext",null),_t([p,kt("design:type",Object),kt("design:paramtypes",[])],St.prototype,"client",null),_t([p,kt("design:type",Object),kt("design:paramtypes",[])],St.prototype,"insights",null),_t([p,kt("design:type",Object),kt("design:paramtypes",[])],St.prototype,"core",null),_t([p,kt("design:type",Object),kt("design:paramtypes",[])],St.prototype,"device",null),_t([p,kt("design:type",Object),kt("design:paramtypes",[])],St.prototype,"cordova",null),_t([p,kt("design:type",Object),kt("design:paramtypes",[])],St.prototype,"userContext",null),_t([p,kt("design:type",Object),kt("design:paramtypes",[])],St.prototype,"singleUserService",null),_t([p,kt("design:type",Object),kt("design:paramtypes",[])],St.prototype,"authModules",null),_t([p,kt("design:type",Object),kt("design:paramtypes",[])],St.prototype,"auth",null),_t([p,kt("design:type",Object),kt("design:paramtypes",[])],St.prototype,"facebookAuth",null),_t([p,kt("design:type",Object),kt("design:paramtypes",[])],St.prototype,"googleAuth",null),_t([p,kt("design:type",Object),kt("design:paramtypes",[])],St.prototype,"push",null),_t([p,kt("design:type",Object),kt("design:paramtypes",[])],St.prototype,"deploy",null),function(){if("undefined"!=typeof angular){var t=new St;angular.element(document).ready(function(){t.core.init(),t.cordova.bootstrap()}),angular.module("ionic.cloud",[]).provider("$ionicCloudConfig",function(){var e=t.config;this.register=function(t){e.register(t)},this.$get=function(){return e}}).provider("$ionicCloud",["$ionicCloudConfigProvider",function(e){this.init=function(t){e.register(t)},this.$get=[function(){return t.core}]}]).factory("$ionicCloudClient",[function(){return t.client}]).factory("$ionicUser",[function(){return t.singleUserService.current()}]).factory("$ionicAuth",[function(){return t.auth}]).factory("$ionicFacebookAuth",[function(){return t.facebookAuth}]).factory("$ionicGoogleAuth",[function(){return t.googleAuth}]).factory("$ionicPush",[function(){return t.push}]).factory("$ionicDeploy",[function(){return t.deploy}]).run(["$window","$q","$rootScope",function(t,e,i){if(void 0===t.Promise)t.Promise=e;else{var n=f.prototype.init;f.prototype.init=function(){n.apply(this,arguments),this.promise=e.when(this.promise)}}var o=nt.prototype.emit;nt.prototype.emit=function(t,e){return i.$broadcast("cloud:"+t,e),o.apply(this,arguments)}}])}}(),t.Auth=w,t.AuthType=b,t.BasicAuthType=_,t.CustomAuthType=E,t.FacebookAuth=S,t.FacebookAuthType=C,t.GithubAuthType=P,t.GoogleAuth=j,t.GoogleAuthType=O,t.InstagramAuthType=x,t.LinkedInAuthType=A,t.TwitterAuthType=T,t.Client=V,t.Config=Q,t.Cordova=W,t.Core=Y,t.Deploy=tt,t.Device=et,t.Exception=l,t.DetailedError=d,t.DIContainer=St,t.EventEmitter=nt,t.Insights=rt,t.Logger=st,t.Push=ut,t.PushMessage=at,t.Storage=ht,t.LocalStorageStrategy=ct,t.SessionStorageStrategy=pt,t.UserContext=vt,t.User=wt,t.SingleUserService=bt}(this.Ionic=this.Ionic||{});
//# sourceMappingURL=ionic.cloud.min.js.map